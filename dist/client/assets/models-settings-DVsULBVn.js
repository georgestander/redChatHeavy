import{r as n,j as e}from"./client-BXVv_YeC.js";import{u as w}from"./QueryClientProvider-BboFp7b3.js";import{B as L}from"./button-BvmNNHkl.js";import{I as A}from"./input-CaNkDFJs.js";import{u as q,g as E,s as h,a as _,b as F}from"./chat-models-provider-CB5B-j5r.js";import{u as P}from"./useQuery-DtNLQT6k.js";import{u as Q}from"./useMutation-BU4p8oK4.js";import{t as B}from"./index-BMGOATel.js";import{c}from"./utils-D-FPgC8r.js";import{useSession as D}from"./session-provider-DBOweKPF.js";import{M as H,A as N}from"./model-selector-logo-CxG4duZO.js";import{S as z}from"./switch-7fStXT0_.js";import{SettingsPageContent as K,SettingsPageScrollArea as V}from"./settings-page-BL_H9J7T.js";import{S as U}from"./search-CeF-vcTf.js";import{c as $}from"./createLucideIcon-CqP9863P.js";import"./index-B4KKYCLu.js";import"./config-DrLGYCgI.js";import"./query-Cv3hDNY5.js";import"./mutation-DaBpc3iQ.js";import"./index-C_VP89m5.js";import"./auth-client-NCEzhzlD.js";import"./zap-Ctw7Kofj.js";import"./image-BO2RBlRM.js";import"./index-CWLAyDMs.js";import"./index-B4ZZijhN.js";import"./index-D3le2-Ql.js";import"./scroll-area-DLgGIp4C.js";import"./index-DhI-dh9t.js";const G=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],J=$("refresh-cw",G),M=n.forwardRef(({className:a,...s},t)=>e.jsx("div",{className:"relative w-full overflow-auto",children:e.jsx("table",{ref:t,className:c("w-full caption-bottom text-sm",a),...s})}));M.displayName="Table";const O=n.forwardRef(({className:a,...s},t)=>e.jsx("thead",{ref:t,className:c("[&_tr]:border-b",a),...s}));O.displayName="TableHeader";const v=n.forwardRef(({className:a,...s},t)=>e.jsx("tbody",{ref:t,className:c("[&_tr:last-child]:border-0",a),...s}));v.displayName="TableBody";const W=n.forwardRef(({className:a,...s},t)=>e.jsx("tfoot",{ref:t,className:c("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",a),...s}));W.displayName="TableFooter";const S=n.forwardRef(({className:a,...s},t)=>e.jsx("tr",{ref:t,className:c("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",a),...s}));S.displayName="TableRow";const X=n.forwardRef(({className:a,...s},t)=>e.jsx("th",{ref:t,className:c("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",a),...s}));X.displayName="TableHead";const g=n.forwardRef(({className:a,...s},t)=>e.jsx("td",{ref:t,className:c("p-4 align-middle [&:has([role=checkbox])]:pr-0",a),...s}));g.displayName="TableCell";const Y=n.forwardRef(({className:a,...s},t)=>e.jsx("caption",{ref:t,className:c("mt-4 text-sm text-muted-foreground",a),...s}));Y.displayName="TableCaption";const Z=n.memo(function({model:s,isEnabled:t,onToggle:d}){const[m]=s.id.split("/"),f=N.reasoning.icon;return e.jsxs(S,{children:[e.jsx(g,{className:"w-full py-2.5 pl-0",children:e.jsxs("div",{className:"flex items-center gap-2.5",children:[m&&e.jsx(H,{provider:m}),e.jsx("span",{className:"font-medium text-sm",children:s.name}),s.reasoning&&e.jsx(f,{"aria-label":N.reasoning.description,className:c("size-3.5 text-muted-foreground",t&&"text-foreground")})]})}),e.jsx(g,{className:"py-2.5 pr-0",children:e.jsx(z,{checked:t,onCheckedChange:()=>d(s.id,t)})})]})});function ee({search:a,className:s}){const t=w(),{allModels:d,models:m}=q(),{data:f}=D(),T=!!f?.user,{data:y,isLoading:C}=P({queryKey:h.modelPreferences,queryFn:F,enabled:T}),u=h.modelPreferences,{mutate:j}=Q({mutationFn:r=>_(r),onMutate:r=>{const o=t.getQueryData(u);return t.setQueryData(u,l=>{if(!l)return l;const i=l.findIndex(k=>k.modelId===r.modelId);return i>=0?l.with(i,{...l[i],enabled:r.enabled}):[...l,{modelId:r.modelId,enabled:r.enabled,userId:"",createdAt:new Date,updatedAt:new Date}]}),{prev:o}},onError:(r,o,l)=>{t.setQueryData(u,l?.prev),B.error("Failed to update model preference")},onSuccess:()=>{t.invalidateQueries({queryKey:u})}}),R=n.useMemo(()=>{const r=E(d);for(const o of y??[])o.enabled?r.add(o.modelId):r.delete(o.modelId);return r},[d,y]),x=n.useRef(null),b=n.useMemo(()=>{if(x.current===null){const o=new Set(m.map(i=>i.id)),l=[...m,...d.filter(i=>!o.has(i.id))];return x.current=l.map(i=>i.id),l}const r=new Map(d.map(o=>[o.id,o]));return x.current.map(o=>r.get(o)).filter(o=>o!==void 0)},[d,m]),p=n.useMemo(()=>{if(!a.trim())return b;const r=a.toLowerCase();return b.filter(o=>o.name.toLowerCase().includes(r)||o.owned_by?.toLowerCase().includes(r)||o.id.toLowerCase().includes(r))},[b,a]),I=n.useCallback((r,o)=>{j({modelId:r,enabled:!o})},[j]);return C?e.jsx("div",{className:"animate-pulse space-y-1",children:[1,2,3,4,5].map(r=>e.jsx("div",{className:"h-11 rounded bg-muted/50"},r))}):e.jsxs(e.Fragment,{children:[e.jsxs("p",{className:"mb-2 text-muted-foreground text-xs",children:[p.length," model",p.length!==1&&"s"]}),e.jsx(M,{className:s,children:e.jsx(v,{children:p.map(r=>e.jsx(Z,{isEnabled:R.has(r.id),model:r,onToggle:I},r.id))})}),p.length===0&&e.jsx("p",{className:"py-8 text-center text-muted-foreground text-sm",children:"No models found."})]})}function Ie(){const a=w(),[s,t]=n.useState(""),d=n.useDeferredValue(s);return e.jsxs(K,{className:"gap-4",children:[e.jsxs("div",{className:"relative flex shrink-0 gap-4",children:[e.jsx(U,{className:"absolute top-1/2 left-3 size-4 -translate-y-1/2 text-muted-foreground"}),e.jsx(A,{className:"bg-muted/50 pr-10 pl-9",onChange:m=>t(m.target.value),placeholder:"Search model",value:s}),e.jsx(L,{onClick:()=>a.invalidateQueries({queryKey:h.modelPreferences}),size:"icon",variant:"ghost",children:e.jsx(J,{className:"size-4"})})]}),e.jsx(V,{children:e.jsx(ee,{className:"block px-4",search:d})})]})}export{Ie as ModelsSettings};
//# sourceMappingURL=models-settings-DVsULBVn.js.map
