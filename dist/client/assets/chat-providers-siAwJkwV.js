import{r as c,j as r}from"./client-BXVv_YeC.js";import{u as m}from"./QueryClientProvider-BboFp7b3.js";import{A as d,g as f,c as l,s as o,a}from"./credits-C6GN1dxI.js";import{g as y}from"./utils-D-FPgC8r.js";import{useSession as p}from"./session-provider-DBOweKPF.js";import{C as g}from"./chat-id-provider-BiTIqLva.js";import"./config-DrLGYCgI.js";import"./auth-client-NCEzhzlD.js";import"./use-navigation-QuPGD7m8.js";function u(){return{id:y(),remainingCredits:d.CREDITS,createdAt:new Date}}function S(e){return e&&typeof e=="object"&&typeof e.id=="string"&&typeof e.remainingCredits=="number"&&(e.createdAt instanceof Date||typeof e.createdAt=="string")}function A(){const{data:e,isPending:i}=p(),n=m();return c.useEffect(()=>{if(i||e?.user)return;const t=f();if(t){if(!S(t)){console.warn("Invalid session schema detected during init, clearing and creating new session"),l();const s=u();o(s),n.invalidateQueries({queryKey:a.available});return}}else{const s=u();o(s),n.invalidateQueries({queryKey:a.available})}},[e,i,n]),null}function K({children:e}){return r.jsxs(g,{children:[r.jsx(A,{}),e]})}export{K as ChatProviders};
//# sourceMappingURL=chat-providers-siAwJkwV.js.map
