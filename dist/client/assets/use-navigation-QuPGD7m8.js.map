{"version":3,"file":"use-navigation-QuPGD7m8.js","sources":["../../../hooks/use-navigation.tsx"],"sourcesContent":["\"use client\";\n\nimport { useEffect, useMemo, useState } from \"react\";\nimport { navigate } from \"rwsdk/client\";\n\nconst NAVIGATION_EVENT = \"rw:navigation\";\n\nfunction notifyNavigation() {\n  if (typeof window === \"undefined\") {\n    return;\n  }\n  window.dispatchEvent(new Event(NAVIGATION_EVENT));\n}\n\nfunction getPathname() {\n  if (typeof window === \"undefined\") {\n    return \"\";\n  }\n  return window.location.pathname;\n}\n\nfunction getSearch() {\n  if (typeof window === \"undefined\") {\n    return \"\";\n  }\n  return window.location.search;\n}\n\nexport function usePathname() {\n  const [pathname, setPathname] = useState(getPathname);\n\n  useEffect(() => {\n    const handleChange = () => setPathname(getPathname());\n    window.addEventListener(\"popstate\", handleChange);\n    window.addEventListener(NAVIGATION_EVENT, handleChange);\n    return () => {\n      window.removeEventListener(\"popstate\", handleChange);\n      window.removeEventListener(NAVIGATION_EVENT, handleChange);\n    };\n  }, []);\n\n  return pathname;\n}\n\nexport function useSearchParams() {\n  const [search, setSearch] = useState(getSearch);\n\n  useEffect(() => {\n    const handleChange = () => setSearch(getSearch());\n    window.addEventListener(\"popstate\", handleChange);\n    window.addEventListener(NAVIGATION_EVENT, handleChange);\n    return () => {\n      window.removeEventListener(\"popstate\", handleChange);\n      window.removeEventListener(NAVIGATION_EVENT, handleChange);\n    };\n  }, []);\n\n  return useMemo(() => new URLSearchParams(search), [search]);\n}\n\nexport function useRouter() {\n  return {\n    push: (href: string) => {\n      navigate(href, { history: \"push\" }).then(\n        notifyNavigation,\n        () => undefined\n      );\n    },\n    replace: (href: string) => {\n      navigate(href, { history: \"replace\" }).then(\n        notifyNavigation,\n        () => undefined\n      );\n    },\n    back: () => {\n      if (typeof window !== \"undefined\") {\n        window.history.back();\n      }\n    },\n    refresh: () => {\n      if (typeof window !== \"undefined\") {\n        window.location.reload();\n      }\n    },\n    prefetch: () => undefined,\n  };\n}\n\nexport function updateSearchParams(\n  params: URLSearchParams,\n  options: { history?: \"push\" | \"replace\" } = { history: \"replace\" }\n) {\n  if (typeof window === \"undefined\") {\n    return;\n  }\n\n  const url = new URL(window.location.href);\n  const nextSearch = params.toString();\n  url.search = nextSearch ? `?${nextSearch}` : \"\";\n\n  if (options.history === \"push\") {\n    window.history.pushState(null, \"\", url.toString());\n  } else {\n    window.history.replaceState(null, \"\", url.toString());\n  }\n\n  notifyNavigation();\n}\n"],"names":["NAVIGATION_EVENT","notifyNavigation","getPathname","getSearch","usePathname","pathname","setPathname","useState","useEffect","handleChange","useSearchParams","search","setSearch","useMemo","useRouter","href","navigate","updateSearchParams","params","options","url","nextSearch"],"mappings":"gDAKA,MAAMA,EAAmB,gBAEzB,SAASC,GAAmB,CACtB,OAAO,OAAW,KAGtB,OAAO,cAAc,IAAI,MAAMD,CAAgB,CAAC,CAClD,CAEA,SAASE,GAAc,CACrB,OAAI,OAAO,OAAW,IACb,GAEF,OAAO,SAAS,QACzB,CAEA,SAASC,GAAY,CACnB,OAAI,OAAO,OAAW,IACb,GAEF,OAAO,SAAS,MACzB,CAEO,SAASC,GAAc,CAC5B,KAAM,CAACC,EAAUC,CAAW,EAAIC,EAAAA,SAASL,CAAW,EAEpDM,OAAAA,EAAAA,UAAU,IAAM,CACd,MAAMC,EAAe,IAAMH,EAAYJ,GAAa,EACpD,cAAO,iBAAiB,WAAYO,CAAY,EAChD,OAAO,iBAAiBT,EAAkBS,CAAY,EAC/C,IAAM,CACX,OAAO,oBAAoB,WAAYA,CAAY,EACnD,OAAO,oBAAoBT,EAAkBS,CAAY,CAC3D,CACF,EAAG,CAAA,CAAE,EAEEJ,CACT,CAEO,SAASK,GAAkB,CAChC,KAAM,CAACC,EAAQC,CAAS,EAAIL,EAAAA,SAASJ,CAAS,EAE9CK,OAAAA,EAAAA,UAAU,IAAM,CACd,MAAMC,EAAe,IAAMG,EAAUT,GAAW,EAChD,cAAO,iBAAiB,WAAYM,CAAY,EAChD,OAAO,iBAAiBT,EAAkBS,CAAY,EAC/C,IAAM,CACX,OAAO,oBAAoB,WAAYA,CAAY,EACnD,OAAO,oBAAoBT,EAAkBS,CAAY,CAC3D,CACF,EAAG,CAAA,CAAE,EAEEI,EAAAA,QAAQ,IAAM,IAAI,gBAAgBF,CAAM,EAAG,CAACA,CAAM,CAAC,CAC5D,CAEO,SAASG,GAAY,CAC1B,MAAO,CACL,KAAOC,GAAiB,CACtBC,EAASD,EAAM,CAAE,QAAS,MAAA,CAAQ,EAAE,KAClCd,EACA,IAAA,EAAM,CAEV,EACA,QAAUc,GAAiB,CACzBC,EAASD,EAAM,CAAE,QAAS,SAAA,CAAW,EAAE,KACrCd,EACA,IAAA,EAAM,CAEV,EACA,KAAM,IAAM,CACN,OAAO,OAAW,KACpB,OAAO,QAAQ,KAAA,CAEnB,EACA,QAAS,IAAM,CACT,OAAO,OAAW,KACpB,OAAO,SAAS,OAAA,CAEpB,EACA,SAAU,IAAA,EAAM,CAEpB,CAEO,SAASgB,EACdC,EACAC,EAA4C,CAAE,QAAS,WACvD,CACA,GAAI,OAAO,OAAW,IACpB,OAGF,MAAMC,EAAM,IAAI,IAAI,OAAO,SAAS,IAAI,EAClCC,EAAaH,EAAO,SAAA,EAC1BE,EAAI,OAASC,EAAa,IAAIA,CAAU,GAAK,GAEzCF,EAAQ,UAAY,OACtB,OAAO,QAAQ,UAAU,KAAM,GAAIC,EAAI,UAAU,EAEjD,OAAO,QAAQ,aAAa,KAAM,GAAIA,EAAI,UAAU,EAGtDnB,EAAA,CACF"}