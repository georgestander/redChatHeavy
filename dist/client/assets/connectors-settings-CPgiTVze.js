import{R as _,j as d,r as G}from"./client-BXVv_YeC.js";import{u as Oe}from"./useQuery-DtNLQT6k.js";import{u as Mt}from"./QueryClientProvider-BboFp7b3.js";import{u as Re}from"./useMutation-BU4p8oK4.js";import{t as me}from"./index-BMGOATel.js";import It from"./link-WNlkKt4p.js";import{M as lr,C as Ot,T as ur}from"./mcp-connect-dialog-CB7DmmcD.js";import{p as cr,a as dr,$ as fr,c as Le,o as mr,s as Ve,_ as yr}from"./config-DrLGYCgI.js";import{c as hr,B as Rt,m as le,d as gr,a as vr,l as xr,b as br,t as pr}from"./get-google-favicon-url-Bedu1OEO.js";import{S as _r,B as ce}from"./button-BvmNNHkl.js";import{D as Vr,d as Cr,a as Fr,b as wr,c as jr,e as Ar}from"./dialog-BVCtBu-i.js";import{c as $e}from"./utils-D-FPgC8r.js";import{I as ft}from"./input-CaNkDFJs.js";import{M as Pe}from"./select-C-PLIKjq.js";import{L as Te,T as Dr}from"./trash-2-DP4m9RAL.js";import{SettingsPageContent as Ne}from"./settings-page-BL_H9J7T.js";import{D as Sr,a as kr,b as Er,c as Me,d as mt}from"./dropdown-menu-DLPkoSE_.js";import{S as Nr}from"./index-C-kxXg33.js";import{u as Mr,c as Ir}from"./use-navigation-QuPGD7m8.js";import{useSession as Or}from"./session-provider-DBOweKPF.js";import{P as Rr}from"./plus-Dvf0tjwj.js";import{c as Lt}from"./createLucideIcon-CqP9863P.js";import{E as Lr}from"./ellipsis-jqpQO7ZS.js";import"./query-Cv3hDNY5.js";import"./mutation-DaBpc3iQ.js";import"./index-C_VP89m5.js";import"./index-B4KKYCLu.js";import"./scroll-area-DLgGIp4C.js";import"./index-CWLAyDMs.js";import"./index-DhI-dh9t.js";import"./index-ClCXh67x.js";import"./index-B4ZZijhN.js";import"./index-D3le2-Ql.js";import"./auth-client-NCEzhzlD.js";const Pr=[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]],Tr=Lt("arrow-up-right",Pr);const Ur=[["path",{d:"M16.247 7.761a6 6 0 0 1 0 8.478",key:"1fwjs5"}],["path",{d:"M19.075 4.933a10 10 0 0 1 0 14.134",key:"ehdyv1"}],["path",{d:"M4.925 19.067a10 10 0 0 1 0-14.134",key:"1q22gi"}],["path",{d:"M7.753 16.239a6 6 0 0 1 0-8.478",key:"r2q7qm"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],Br=Lt("radio",Ur);var pe=e=>e.type==="checkbox",ue=e=>e instanceof Date,K=e=>e==null;const Pt=e=>typeof e=="object";var B=e=>!K(e)&&!Array.isArray(e)&&Pt(e)&&!ue(e),Tt=e=>B(e)&&e.target?pe(e.target)?e.target.checked:e.target.value:e,qr=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,Ut=(e,r)=>e.has(qr(r)),zr=e=>{const r=e.constructor&&e.constructor.prototype;return B(r)&&r.hasOwnProperty("isPrototypeOf")},He=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function T(e){if(e instanceof Date)return new Date(e);const r=typeof FileList<"u"&&e instanceof FileList;if(He&&(e instanceof Blob||r))return e;const t=Array.isArray(e);if(!t&&!(B(e)&&zr(e)))return e;const s=t?[]:Object.create(Object.getPrototypeOf(e));for(const o in e)Object.prototype.hasOwnProperty.call(e,o)&&(s[o]=T(e[o]));return s}var je=e=>/^\w*$/.test(e),L=e=>e===void 0,We=e=>Array.isArray(e)?e.filter(Boolean):[],Qe=e=>We(e.replace(/["|']|\]/g,"").split(/\.|\[/)),y=(e,r,t)=>{if(!r||!B(e))return t;const s=(je(r)?[r]:Qe(r)).reduce((o,n)=>K(o)?o:o[n],e);return L(s)||s===e?L(e[r])?t:e[r]:s},X=e=>typeof e=="boolean",Q=e=>typeof e=="function",N=(e,r,t)=>{let s=-1;const o=je(r)?[r]:Qe(r),n=o.length,l=n-1;for(;++s<n;){const c=o[s];let b=t;if(s!==l){const V=e[c];b=B(V)||Array.isArray(V)?V:isNaN(+o[s+1])?{}:[]}if(c==="__proto__"||c==="constructor"||c==="prototype")return;e[c]=b,e=e[c]}};const Ce={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},re={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},ne={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},Ke=_.createContext(null);Ke.displayName="HookFormControlContext";const Ge=()=>_.useContext(Ke);var Bt=(e,r,t,s=!0)=>{const o={defaultValues:r._defaultValues};for(const n in e)Object.defineProperty(o,n,{get:()=>{const l=n;return r._proxyFormState[l]!==re.all&&(r._proxyFormState[l]=!s||re.all),t&&(t[l]=!0),e[l]}});return o};const Ze=typeof window<"u"?_.useLayoutEffect:_.useEffect;function qt(e){const r=Ge(),{control:t=r,disabled:s,name:o,exact:n}=e||{},[l,c]=_.useState(t._formState),b=_.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1});return Ze(()=>t._subscribe({name:o,formState:b.current,exact:n,callback:V=>{!s&&c({...t._formState,...V})}}),[o,s,n]),_.useEffect(()=>{b.current.isValid&&t._setValid(!0)},[t]),_.useMemo(()=>Bt(l,t,b.current,!1),[l,t])}var Y=e=>typeof e=="string",Ue=(e,r,t,s,o)=>Y(e)?(s&&r.watch.add(e),y(t,e,o)):Array.isArray(e)?e.map(n=>(s&&r.watch.add(n),y(t,n))):(s&&(r.watchAll=!0),t),Be=e=>K(e)||!Pt(e);function se(e,r,t=new WeakSet){if(Be(e)||Be(r))return Object.is(e,r);if(ue(e)&&ue(r))return Object.is(e.getTime(),r.getTime());const s=Object.keys(e),o=Object.keys(r);if(s.length!==o.length)return!1;if(t.has(e)||t.has(r))return!0;t.add(e),t.add(r);for(const n of s){const l=e[n];if(!o.includes(n))return!1;if(n!=="ref"){const c=r[n];if(ue(l)&&ue(c)||B(l)&&B(c)||Array.isArray(l)&&Array.isArray(c)?!se(l,c,t):!Object.is(l,c))return!1}}return!0}function $r(e){const r=Ge(),{control:t=r,name:s,defaultValue:o,disabled:n,exact:l,compute:c}=e||{},b=_.useRef(o),V=_.useRef(c),A=_.useRef(void 0),g=_.useRef(t),C=_.useRef(s);V.current=c;const[p,S]=_.useState(()=>{const w=t._getWatch(s,b.current);return V.current?V.current(w):w}),M=_.useCallback(w=>{const v=Ue(s,t._names,w||t._formValues,!1,b.current);return V.current?V.current(v):v},[t._formValues,t._names,s]),O=_.useCallback(w=>{if(!n){const v=Ue(s,t._names,w||t._formValues,!1,b.current);if(V.current){const P=V.current(v);se(P,A.current)||(S(P),A.current=P)}else S(v)}},[t._formValues,t._names,n,s]);Ze(()=>((g.current!==t||!se(C.current,s))&&(g.current=t,C.current=s,O()),t._subscribe({name:s,formState:{values:!0},exact:l,callback:w=>{O(w.values)}})),[t,l,s,O]),_.useEffect(()=>t._removeUnmounted());const I=g.current!==t,F=C.current,q=_.useMemo(()=>{if(n)return null;const w=!I&&!se(F,s);return I||w?M():null},[n,I,s,F,M]);return q!==null?q:p}function Hr(e){const r=Ge(),{name:t,disabled:s,control:o=r,shouldUnregister:n,defaultValue:l,exact:c=!0}=e,b=Ut(o._names.array,t),V=_.useMemo(()=>y(o._formValues,t,y(o._defaultValues,t,l)),[o,t,l]),A=$r({control:o,name:t,defaultValue:V,exact:c}),g=qt({control:o,name:t,exact:c}),C=_.useRef(e),p=_.useRef(void 0),S=_.useRef(o.register(t,{...e.rules,value:A,...X(e.disabled)?{disabled:e.disabled}:{}}));C.current=e;const M=_.useMemo(()=>Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!y(g.errors,t)},isDirty:{enumerable:!0,get:()=>!!y(g.dirtyFields,t)},isTouched:{enumerable:!0,get:()=>!!y(g.touchedFields,t)},isValidating:{enumerable:!0,get:()=>!!y(g.validatingFields,t)},error:{enumerable:!0,get:()=>y(g.errors,t)}}),[g,t]),O=_.useCallback(w=>S.current.onChange({target:{value:Tt(w),name:t},type:Ce.CHANGE}),[t]),I=_.useCallback(()=>S.current.onBlur({target:{value:y(o._formValues,t),name:t},type:Ce.BLUR}),[t,o._formValues]),F=_.useCallback(w=>{const v=y(o._fields,t);v&&v._f&&w&&(v._f.ref={focus:()=>Q(w.focus)&&w.focus(),select:()=>Q(w.select)&&w.select(),setCustomValidity:P=>Q(w.setCustomValidity)&&w.setCustomValidity(P),reportValidity:()=>Q(w.reportValidity)&&w.reportValidity()})},[o._fields,t]),q=_.useMemo(()=>({name:t,value:A,...X(s)||g.disabled?{disabled:g.disabled||s}:{},onChange:O,onBlur:I,ref:F}),[t,s,g.disabled,O,I,F,A]);return _.useEffect(()=>{const w=o._options.shouldUnregister||n,v=p.current;v&&v!==t&&!b&&o.unregister(v),o.register(t,{...C.current.rules,...X(C.current.disabled)?{disabled:C.current.disabled}:{}});const P=(R,ee)=>{const ie=y(o._fields,R);ie&&ie._f&&(ie._f.mount=ee)};if(P(t,!0),w){const R=T(y(o._options.defaultValues,t,C.current.defaultValue));N(o._defaultValues,t,R),L(y(o._formValues,t))&&N(o._formValues,t,R)}return!b&&o.register(t),p.current=t,()=>{(b?w&&!o._state.action:w)?o.unregister(t):P(t,!1)}},[t,o,b,n]),_.useEffect(()=>{o._setDisabledField({disabled:s,name:t})},[s,t,o]),_.useMemo(()=>({field:q,formState:g,fieldState:M}),[q,g,M])}const Wr=e=>e.render(Hr(e)),Xe=_.createContext(null);Xe.displayName="HookFormContext";const Qr=()=>_.useContext(Xe),Kr=e=>{const{children:r,watch:t,getValues:s,getFieldState:o,setError:n,clearErrors:l,setValue:c,trigger:b,formState:V,resetField:A,reset:g,handleSubmit:C,unregister:p,control:S,register:M,setFocus:O,subscribe:I}=e;return _.createElement(Xe.Provider,{value:_.useMemo(()=>({watch:t,getValues:s,getFieldState:o,setError:n,clearErrors:l,setValue:c,trigger:b,formState:V,resetField:A,reset:g,handleSubmit:C,unregister:p,control:S,register:M,setFocus:O,subscribe:I}),[l,S,V,o,s,C,M,g,A,n,O,c,I,b,p,t])},_.createElement(Ke.Provider,{value:S},r))};var Ye=(e,r,t,s,o)=>r?{...t[e],types:{...t[e]&&t[e].types?t[e].types:{},[s]:o||!0}}:{},xe=e=>Array.isArray(e)?e:[e],yt=()=>{let e=[];return{get observers(){return e},next:o=>{for(const n of e)n.next&&n.next(o)},subscribe:o=>(e.push(o),{unsubscribe:()=>{e=e.filter(n=>n!==o)}}),unsubscribe:()=>{e=[]}}};function zt(e,r){const t={};for(const s in e)if(e.hasOwnProperty(s)){const o=e[s],n=r[s];if(o&&B(o)&&n){const l=zt(o,n);B(l)&&(t[s]=l)}else e[s]&&(t[s]=n)}return t}var W=e=>B(e)&&!Object.keys(e).length,Je=e=>e.type==="file",Fe=e=>{if(!He)return!1;const r=e?e.ownerDocument:0;return e instanceof(r&&r.defaultView?r.defaultView.HTMLElement:HTMLElement)},$t=e=>e.type==="select-multiple",et=e=>e.type==="radio",Gr=e=>et(e)||pe(e),Ie=e=>Fe(e)&&e.isConnected;function Zr(e,r){const t=r.slice(0,-1).length;let s=0;for(;s<t;)e=L(e)?s++:e[r[s++]];return e}function Xr(e){for(const r in e)if(e.hasOwnProperty(r)&&!L(e[r]))return!1;return!0}function U(e,r){const t=Array.isArray(r)?r:je(r)?[r]:Qe(r),s=t.length===1?e:Zr(e,t),o=t.length-1,n=t[o];return s&&delete s[n],o!==0&&(B(s)&&W(s)||Array.isArray(s)&&Xr(s))&&U(e,t.slice(0,-1)),e}var Yr=e=>{for(const r in e)if(Q(e[r]))return!0;return!1};function Ht(e){return Array.isArray(e)||B(e)&&!Yr(e)}function qe(e,r={}){for(const t in e){const s=e[t];Ht(s)?(r[t]=Array.isArray(s)?[]:{},qe(s,r[t])):L(s)||(r[t]=!0)}return r}function fe(e,r,t){t||(t=qe(r));for(const s in e){const o=e[s];if(Ht(o))L(r)||Be(t[s])?t[s]=qe(o,Array.isArray(o)?[]:{}):fe(o,K(r)?{}:r[s],t[s]);else{const n=r[s];t[s]=!se(o,n)}}return t}const ht={value:!1,isValid:!1},gt={value:!0,isValid:!0};var Wt=e=>{if(Array.isArray(e)){if(e.length>1){const r=e.filter(t=>t&&t.checked&&!t.disabled).map(t=>t.value);return{value:r,isValid:!!r.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!L(e[0].attributes.value)?L(e[0].value)||e[0].value===""?gt:{value:e[0].value,isValid:!0}:gt:ht}return ht},Qt=(e,{valueAsNumber:r,valueAsDate:t,setValueAs:s})=>L(e)?e:r?e===""?NaN:e&&+e:t&&Y(e)?new Date(e):s?s(e):e;const vt={isValid:!1,value:null};var Kt=e=>Array.isArray(e)?e.reduce((r,t)=>t&&t.checked&&!t.disabled?{isValid:!0,value:t.value}:r,vt):vt;function xt(e){const r=e.ref;return Je(r)?r.files:et(r)?Kt(e.refs).value:$t(r)?[...r.selectedOptions].map(({value:t})=>t):pe(r)?Wt(e.refs).value:Qt(L(r.value)?e.ref.value:r.value,e)}var Jr=(e,r,t,s)=>{const o={};for(const n of e){const l=y(r,n);l&&N(o,n,l._f)}return{criteriaMode:t,names:[...e],fields:o,shouldUseNativeValidation:s}},we=e=>e instanceof RegExp,ve=e=>L(e)?e:we(e)?e.source:B(e)?we(e.value)?e.value.source:e.value:e,bt=e=>({isOnSubmit:!e||e===re.onSubmit,isOnBlur:e===re.onBlur,isOnChange:e===re.onChange,isOnAll:e===re.all,isOnTouch:e===re.onTouched});const pt="AsyncFunction";var es=e=>!!e&&!!e.validate&&!!(Q(e.validate)&&e.validate.constructor.name===pt||B(e.validate)&&Object.values(e.validate).find(r=>r.constructor.name===pt)),ts=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate),_t=(e,r,t)=>!t&&(r.watchAll||r.watch.has(e)||[...r.watch].some(s=>e.startsWith(s)&&/^\.\w+/.test(e.slice(s.length))));const be=(e,r,t,s)=>{for(const o of t||Object.keys(e)){const n=y(e,o);if(n){const{_f:l,...c}=n;if(l){if(l.refs&&l.refs[0]&&r(l.refs[0],o)&&!s)return!0;if(l.ref&&r(l.ref,l.name)&&!s)return!0;if(be(c,r))break}else if(B(c)&&be(c,r))break}}};function Vt(e,r,t){const s=y(e,t);if(s||je(t))return{error:s,name:t};const o=t.split(".");for(;o.length;){const n=o.join("."),l=y(r,n),c=y(e,n);if(l&&!Array.isArray(l)&&t!==n)return{name:t};if(c&&c.type)return{name:n,error:c};if(c&&c.root&&c.root.type)return{name:`${n}.root`,error:c.root};o.pop()}return{name:t}}var rs=(e,r,t,s)=>{t(e);const{name:o,...n}=e;return W(n)||Object.keys(n).length>=Object.keys(r).length||Object.keys(n).find(l=>r[l]===(!s||re.all))},ss=(e,r,t)=>!e||!r||e===r||xe(e).some(s=>s&&(t?s===r:s.startsWith(r)||r.startsWith(s))),is=(e,r,t,s,o)=>o.isOnAll?!1:!t&&o.isOnTouch?!(r||e):(t?s.isOnBlur:o.isOnBlur)?!e:(t?s.isOnChange:o.isOnChange)?e:!0,ns=(e,r)=>!We(y(e,r)).length&&U(e,r),as=(e,r,t)=>{const s=xe(y(e,t));return N(s,"root",r[t]),N(e,t,s),e};function Ct(e,r,t="validate"){if(Y(e)||Array.isArray(e)&&e.every(Y)||X(e)&&!e)return{type:t,message:Y(e)?e:"",ref:r}}var de=e=>B(e)&&!we(e)?e:{value:e,message:""},Ft=async(e,r,t,s,o,n)=>{const{ref:l,refs:c,required:b,maxLength:V,minLength:A,min:g,max:C,pattern:p,validate:S,name:M,valueAsNumber:O,mount:I}=e._f,F=y(t,M);if(!I||r.has(M))return{};const q=c?c[0]:l,w=j=>{o&&q.reportValidity&&(q.setCustomValidity(X(j)?"":j||""),q.reportValidity())},v={},P=et(l),R=pe(l),ee=P||R,ie=(O||Je(l))&&L(l.value)&&L(F)||Fe(l)&&l.value===""||F===""||Array.isArray(F)&&!F.length,J=Ye.bind(null,M,s,v),_e=(j,D,z,$=ne.maxLength,te=ne.minLength)=>{const Z=j?D:z;v[M]={type:j?$:te,message:Z,ref:l,...J(j?$:te,Z)}};if(n?!Array.isArray(F)||!F.length:b&&(!ee&&(ie||K(F))||X(F)&&!F||R&&!Wt(c).isValid||P&&!Kt(c).isValid)){const{value:j,message:D}=Y(b)?{value:!!b,message:b}:de(b);if(j&&(v[M]={type:ne.required,message:D,ref:q,...J(ne.required,D)},!s))return w(D),v}if(!ie&&(!K(g)||!K(C))){let j,D;const z=de(C),$=de(g);if(!K(F)&&!isNaN(F)){const te=l.valueAsNumber||F&&+F;K(z.value)||(j=te>z.value),K($.value)||(D=te<$.value)}else{const te=l.valueAsDate||new Date(F),Z=ge=>new Date(new Date().toDateString()+" "+ge),ye=l.type=="time",he=l.type=="week";Y(z.value)&&F&&(j=ye?Z(F)>Z(z.value):he?F>z.value:te>new Date(z.value)),Y($.value)&&F&&(D=ye?Z(F)<Z($.value):he?F<$.value:te<new Date($.value))}if((j||D)&&(_e(!!j,z.message,$.message,ne.max,ne.min),!s))return w(v[M].message),v}if((V||A)&&!ie&&(Y(F)||n&&Array.isArray(F))){const j=de(V),D=de(A),z=!K(j.value)&&F.length>+j.value,$=!K(D.value)&&F.length<+D.value;if((z||$)&&(_e(z,j.message,D.message),!s))return w(v[M].message),v}if(p&&!ie&&Y(F)){const{value:j,message:D}=de(p);if(we(j)&&!F.match(j)&&(v[M]={type:ne.pattern,message:D,ref:l,...J(ne.pattern,D)},!s))return w(D),v}if(S){if(Q(S)){const j=await S(F,t),D=Ct(j,q);if(D&&(v[M]={...D,...J(ne.validate,D.message)},!s))return w(D.message),v}else if(B(S)){let j={};for(const D in S){if(!W(j)&&!s)break;const z=Ct(await S[D](F,t),q,D);z&&(j={...z,...J(D,z.message)},w(z.message),s&&(v[M]=j))}if(!W(j)&&(v[M]={ref:q,...j},!s))return v}}return w(!0),v};const os={mode:re.onSubmit,reValidateMode:re.onChange,shouldFocusError:!0};function ls(e={}){let r={...os,...e},t={submitCount:0,isDirty:!1,isReady:!1,isLoading:Q(r.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:r.errors||{},disabled:r.disabled||!1},s={},o=B(r.defaultValues)||B(r.values)?T(r.defaultValues||r.values)||{}:{},n=r.shouldUnregister?{}:T(o),l={action:!1,mount:!1,watch:!1,keepIsValid:!1},c={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},b,V=0;const A={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},g={...A};let C={...g};const p={array:yt(),state:yt()},S=r.criteriaMode===re.all,M=i=>a=>{clearTimeout(V),V=setTimeout(i,a)},O=async i=>{if(!l.keepIsValid&&!r.disabled&&(g.isValid||C.isValid||i)){let a;r.resolver?(a=W((await ee()).errors),I()):a=await J(s,!0),a!==t.isValid&&p.state.next({isValid:a})}},I=(i,a)=>{!r.disabled&&(g.isValidating||g.validatingFields||C.isValidating||C.validatingFields)&&((i||Array.from(c.mount)).forEach(u=>{u&&(a?N(t.validatingFields,u,a):U(t.validatingFields,u))}),p.state.next({validatingFields:t.validatingFields,isValidating:!W(t.validatingFields)}))},F=(i,a=[],u,h,m=!0,f=!0)=>{if(h&&u&&!r.disabled){if(l.action=!0,f&&Array.isArray(y(s,i))){const x=u(y(s,i),h.argA,h.argB);m&&N(s,i,x)}if(f&&Array.isArray(y(t.errors,i))){const x=u(y(t.errors,i),h.argA,h.argB);m&&N(t.errors,i,x),ns(t.errors,i)}if((g.touchedFields||C.touchedFields)&&f&&Array.isArray(y(t.touchedFields,i))){const x=u(y(t.touchedFields,i),h.argA,h.argB);m&&N(t.touchedFields,i,x)}(g.dirtyFields||C.dirtyFields)&&(t.dirtyFields=fe(o,n)),p.state.next({name:i,isDirty:j(i,a),dirtyFields:t.dirtyFields,errors:t.errors,isValid:t.isValid})}else N(n,i,a)},q=(i,a)=>{N(t.errors,i,a),p.state.next({errors:t.errors})},w=i=>{t.errors=i,p.state.next({errors:t.errors,isValid:!1})},v=(i,a,u,h)=>{const m=y(s,i);if(m){const f=y(n,i,L(u)?y(o,i):u);L(f)||h&&h.defaultChecked||a?N(n,i,a?f:xt(m._f)):$(i,f),l.mount&&!l.action&&O()}},P=(i,a,u,h,m)=>{let f=!1,x=!1;const k={name:i};if(!r.disabled){if(!u||h){(g.isDirty||C.isDirty)&&(x=t.isDirty,t.isDirty=k.isDirty=j(),f=x!==k.isDirty);const E=se(y(o,i),a);x=!!y(t.dirtyFields,i),E?U(t.dirtyFields,i):N(t.dirtyFields,i,!0),k.dirtyFields=t.dirtyFields,f=f||(g.dirtyFields||C.dirtyFields)&&x!==!E}if(u){const E=y(t.touchedFields,i);E||(N(t.touchedFields,i,u),k.touchedFields=t.touchedFields,f=f||(g.touchedFields||C.touchedFields)&&E!==u)}f&&m&&p.state.next(k)}return f?k:{}},R=(i,a,u,h)=>{const m=y(t.errors,i),f=(g.isValid||C.isValid)&&X(a)&&t.isValid!==a;if(r.delayError&&u?(b=M(()=>q(i,u)),b(r.delayError)):(clearTimeout(V),b=null,u?N(t.errors,i,u):U(t.errors,i)),(u?!se(m,u):m)||!W(h)||f){const x={...h,...f&&X(a)?{isValid:a}:{},errors:t.errors,name:i};t={...t,...x},p.state.next(x)}},ee=async i=>(I(i,!0),await r.resolver(n,r.context,Jr(i||c.mount,s,r.criteriaMode,r.shouldUseNativeValidation))),ie=async i=>{const{errors:a}=await ee(i);if(I(i),i)for(const u of i){const h=y(a,u);h?N(t.errors,u,h):U(t.errors,u)}else t.errors=a;return a},J=async(i,a,u={valid:!0})=>{for(const h in i){const m=i[h];if(m){const{_f:f,...x}=m;if(f){const k=c.array.has(f.name),E=m._f&&es(m._f);E&&g.validatingFields&&I([f.name],!0);const H=await Ft(m,c.disabled,n,S,r.shouldUseNativeValidation&&!a,k);if(E&&g.validatingFields&&I([f.name]),H[f.name]&&(u.valid=!1,a||e.shouldUseNativeValidation))break;!a&&(y(H,f.name)?k?as(t.errors,H,f.name):N(t.errors,f.name,H[f.name]):U(t.errors,f.name))}!W(x)&&await J(x,a,u)}}return u.valid},_e=()=>{for(const i of c.unMount){const a=y(s,i);a&&(a._f.refs?a._f.refs.every(u=>!Ie(u)):!Ie(a._f.ref))&&Ae(i)}c.unMount=new Set},j=(i,a)=>!r.disabled&&(i&&a&&N(n,i,a),!se(tt(),o)),D=(i,a,u)=>Ue(i,c,{...l.mount?n:L(a)?o:Y(i)?{[i]:a}:a},u,a),z=i=>We(y(l.mount?n:o,i,r.shouldUnregister?y(o,i,[]):[])),$=(i,a,u={})=>{const h=y(s,i);let m=a;if(h){const f=h._f;f&&(!f.disabled&&N(n,i,Qt(a,f)),m=Fe(f.ref)&&K(a)?"":a,$t(f.ref)?[...f.ref.options].forEach(x=>x.selected=m.includes(x.value)):f.refs?pe(f.ref)?f.refs.forEach(x=>{(!x.defaultChecked||!x.disabled)&&(Array.isArray(m)?x.checked=!!m.find(k=>k===x.value):x.checked=m===x.value||!!m)}):f.refs.forEach(x=>x.checked=x.value===m):Je(f.ref)?f.ref.value="":(f.ref.value=m,f.ref.type||p.state.next({name:i,values:T(n)})))}(u.shouldDirty||u.shouldTouch)&&P(i,m,u.shouldTouch,u.shouldDirty,!0),u.shouldValidate&&ge(i)},te=(i,a,u)=>{for(const h in a){if(!a.hasOwnProperty(h))return;const m=a[h],f=i+"."+h,x=y(s,f);(c.array.has(i)||B(m)||x&&!x._f)&&!ue(m)?te(f,m,u):$(f,m,u)}},Z=(i,a,u={})=>{const h=y(s,i),m=c.array.has(i),f=T(a);N(n,i,f),m?(p.array.next({name:i,values:T(n)}),(g.isDirty||g.dirtyFields||C.isDirty||C.dirtyFields)&&u.shouldDirty&&p.state.next({name:i,dirtyFields:fe(o,n),isDirty:j(i,f)})):h&&!h._f&&!K(f)?te(i,f,u):$(i,f,u),_t(i,c)?p.state.next({...t,name:i,values:T(n)}):p.state.next({name:l.mount?i:void 0,values:T(n)})},ye=async i=>{l.mount=!0;const a=i.target;let u=a.name,h=!0;const m=y(s,u),f=E=>{h=Number.isNaN(E)||ue(E)&&isNaN(E.getTime())||se(E,y(n,u,E))},x=bt(r.mode),k=bt(r.reValidateMode);if(m){let E,H;const oe=a.type?xt(m._f):Tt(i),ae=i.type===Ce.BLUR||i.type===Ce.FOCUS_OUT,nr=!ts(m._f)&&!r.resolver&&!y(t.errors,u)&&!m._f.deps||is(ae,y(t.touchedFields,u),t.isSubmitted,k,x),ke=_t(u,c,ae);N(n,u,oe),ae?(!a||!a.readOnly)&&(m._f.onBlur&&m._f.onBlur(i),b&&b(0)):m._f.onChange&&m._f.onChange(i);const Ee=P(u,oe,ae),ar=!W(Ee)||ke;if(!ae&&p.state.next({name:u,type:i.type,values:T(n)}),nr)return(g.isValid||C.isValid)&&(r.mode==="onBlur"?ae&&O():ae||O()),ar&&p.state.next({name:u,...ke?{}:Ee});if(!ae&&ke&&p.state.next({...t}),r.resolver){const{errors:ct}=await ee([u]);if(I([u]),f(oe),h){const or=Vt(t.errors,s,u),dt=Vt(ct,s,or.name||u);E=dt.error,u=dt.name,H=W(ct)}}else I([u],!0),E=(await Ft(m,c.disabled,n,S,r.shouldUseNativeValidation))[u],I([u]),f(oe),h&&(E?H=!1:(g.isValid||C.isValid)&&(H=await J(s,!0)));h&&(m._f.deps&&(!Array.isArray(m._f.deps)||m._f.deps.length>0)&&ge(m._f.deps),R(u,H,E,Ee))}},he=(i,a)=>{if(y(t.errors,a)&&i.focus)return i.focus(),1},ge=async(i,a={})=>{let u,h;const m=xe(i);if(r.resolver){const f=await ie(L(i)?i:m);u=W(f),h=i?!m.some(x=>y(f,x)):u}else i?(h=(await Promise.all(m.map(async f=>{const x=y(s,f);return await J(x&&x._f?{[f]:x}:x)}))).every(Boolean),!(!h&&!t.isValid)&&O()):h=u=await J(s);return p.state.next({...!Y(i)||(g.isValid||C.isValid)&&u!==t.isValid?{}:{name:i},...r.resolver||!i?{isValid:u}:{},errors:t.errors}),a.shouldFocus&&!h&&be(s,he,i?m:c.mount),h},tt=(i,a)=>{let u={...l.mount?n:o};return a&&(u=zt(a.dirtyFields?t.dirtyFields:t.touchedFields,u)),L(i)?u:Y(i)?y(u,i):i.map(h=>y(u,h))},rt=(i,a)=>({invalid:!!y((a||t).errors,i),isDirty:!!y((a||t).dirtyFields,i),error:y((a||t).errors,i),isValidating:!!y(t.validatingFields,i),isTouched:!!y((a||t).touchedFields,i)}),Yt=i=>{i&&xe(i).forEach(a=>U(t.errors,a)),p.state.next({errors:i?t.errors:{}})},st=(i,a,u)=>{const h=(y(s,i,{_f:{}})._f||{}).ref,m=y(t.errors,i)||{},{ref:f,message:x,type:k,...E}=m;N(t.errors,i,{...E,...a,ref:h}),p.state.next({name:i,errors:t.errors,isValid:!1}),u&&u.shouldFocus&&h&&h.focus&&h.focus()},Jt=(i,a)=>Q(i)?p.state.subscribe({next:u=>"values"in u&&i(D(void 0,a),u)}):D(i,a,!0),it=i=>p.state.subscribe({next:a=>{ss(i.name,a.name,i.exact)&&rs(a,i.formState||g,ir,i.reRenderRoot)&&i.callback({values:{...n},...t,...a,defaultValues:o})}}).unsubscribe,er=i=>(l.mount=!0,C={...C,...i.formState},it({...i,formState:{...A,...i.formState}})),Ae=(i,a={})=>{for(const u of i?xe(i):c.mount)c.mount.delete(u),c.array.delete(u),a.keepValue||(U(s,u),U(n,u)),!a.keepError&&U(t.errors,u),!a.keepDirty&&U(t.dirtyFields,u),!a.keepTouched&&U(t.touchedFields,u),!a.keepIsValidating&&U(t.validatingFields,u),!r.shouldUnregister&&!a.keepDefaultValue&&U(o,u);p.state.next({values:T(n)}),p.state.next({...t,...a.keepDirty?{isDirty:j()}:{}}),!a.keepIsValid&&O()},nt=({disabled:i,name:a})=>{if(X(i)&&l.mount||i||c.disabled.has(a)){const m=c.disabled.has(a)!==!!i;i?c.disabled.add(a):c.disabled.delete(a),m&&l.mount&&!l.action&&O()}},De=(i,a={})=>{let u=y(s,i);const h=X(a.disabled)||X(r.disabled);return N(s,i,{...u||{},_f:{...u&&u._f?u._f:{ref:{name:i}},name:i,mount:!0,...a}}),c.mount.add(i),u?nt({disabled:X(a.disabled)?a.disabled:r.disabled,name:i}):v(i,!0,a.value),{...h?{disabled:a.disabled||r.disabled}:{},...r.progressive?{required:!!a.required,min:ve(a.min),max:ve(a.max),minLength:ve(a.minLength),maxLength:ve(a.maxLength),pattern:ve(a.pattern)}:{},name:i,onChange:ye,onBlur:ye,ref:m=>{if(m){De(i,a),u=y(s,i);const f=L(m.value)&&m.querySelectorAll&&m.querySelectorAll("input,select,textarea")[0]||m,x=Gr(f),k=u._f.refs||[];if(x?k.find(E=>E===f):f===u._f.ref)return;N(s,i,{_f:{...u._f,...x?{refs:[...k.filter(Ie),f,...Array.isArray(y(o,i))?[{}]:[]],ref:{type:f.type,name:i}}:{ref:f}}}),v(i,!1,void 0,f)}else u=y(s,i,{}),u._f&&(u._f.mount=!1),(r.shouldUnregister||a.shouldUnregister)&&!(Ut(c.array,i)&&l.action)&&c.unMount.add(i)}}},Se=()=>r.shouldFocusError&&be(s,he,c.mount),tr=i=>{X(i)&&(p.state.next({disabled:i}),be(s,(a,u)=>{const h=y(s,u);h&&(a.disabled=h._f.disabled||i,Array.isArray(h._f.refs)&&h._f.refs.forEach(m=>{m.disabled=h._f.disabled||i}))},0,!1))},at=(i,a)=>async u=>{let h;u&&(u.preventDefault&&u.preventDefault(),u.persist&&u.persist());let m=T(n);if(p.state.next({isSubmitting:!0}),r.resolver){const{errors:f,values:x}=await ee();I(),t.errors=f,m=T(x)}else await J(s);if(c.disabled.size)for(const f of c.disabled)U(m,f);if(U(t.errors,"root"),W(t.errors)){p.state.next({errors:{}});try{await i(m,u)}catch(f){h=f}}else a&&await a({...t.errors},u),Se(),setTimeout(Se);if(p.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:W(t.errors)&&!h,submitCount:t.submitCount+1,errors:t.errors}),h)throw h},rr=(i,a={})=>{y(s,i)&&(L(a.defaultValue)?Z(i,T(y(o,i))):(Z(i,a.defaultValue),N(o,i,T(a.defaultValue))),a.keepTouched||U(t.touchedFields,i),a.keepDirty||(U(t.dirtyFields,i),t.isDirty=a.defaultValue?j(i,T(y(o,i))):j()),a.keepError||(U(t.errors,i),g.isValid&&O()),p.state.next({...t}))},ot=(i,a={})=>{const u=i?T(i):o,h=T(u),m=W(i),f=m?o:h;if(a.keepDefaultValues||(o=u),!a.keepValues){if(a.keepDirtyValues){const x=new Set([...c.mount,...Object.keys(fe(o,n))]);for(const k of Array.from(x)){const E=y(t.dirtyFields,k),H=y(n,k),oe=y(f,k);E&&!L(H)?N(f,k,H):!E&&!L(oe)&&Z(k,oe)}}else{if(He&&L(i))for(const x of c.mount){const k=y(s,x);if(k&&k._f){const E=Array.isArray(k._f.refs)?k._f.refs[0]:k._f.ref;if(Fe(E)){const H=E.closest("form");if(H){H.reset();break}}}}if(a.keepFieldsRef)for(const x of c.mount)Z(x,y(f,x));else s={}}n=r.shouldUnregister?a.keepDefaultValues?T(o):{}:T(f),p.array.next({values:{...f}}),p.state.next({values:{...f}})}c={mount:a.keepDirtyValues?c.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},l.mount=!g.isValid||!!a.keepIsValid||!!a.keepDirtyValues||!r.shouldUnregister&&!W(f),l.watch=!!r.shouldUnregister,l.keepIsValid=!!a.keepIsValid,l.action=!1,a.keepErrors||(t.errors={}),p.state.next({submitCount:a.keepSubmitCount?t.submitCount:0,isDirty:m?!1:a.keepDirty?t.isDirty:!!(a.keepDefaultValues&&!se(i,o)),isSubmitted:a.keepIsSubmitted?t.isSubmitted:!1,dirtyFields:m?{}:a.keepDirtyValues?a.keepDefaultValues&&n?fe(o,n):t.dirtyFields:a.keepDefaultValues&&i?fe(o,i):a.keepDirty?t.dirtyFields:{},touchedFields:a.keepTouched?t.touchedFields:{},errors:a.keepErrors?t.errors:{},isSubmitSuccessful:a.keepIsSubmitSuccessful?t.isSubmitSuccessful:!1,isSubmitting:!1,defaultValues:o})},lt=(i,a)=>ot(Q(i)?i(n):i,{...r.resetOptions,...a}),sr=(i,a={})=>{const u=y(s,i),h=u&&u._f;if(h){const m=h.refs?h.refs[0]:h.ref;m.focus&&setTimeout(()=>{m.focus(),a.shouldSelect&&Q(m.select)&&m.select()})}},ir=i=>{t={...t,...i}},ut={control:{register:De,unregister:Ae,getFieldState:rt,handleSubmit:at,setError:st,_subscribe:it,_runSchema:ee,_updateIsValidating:I,_focusError:Se,_getWatch:D,_getDirty:j,_setValid:O,_setFieldArray:F,_setDisabledField:nt,_setErrors:w,_getFieldArray:z,_reset:ot,_resetDefaultValues:()=>Q(r.defaultValues)&&r.defaultValues().then(i=>{lt(i,r.resetOptions),p.state.next({isLoading:!1})}),_removeUnmounted:_e,_disableForm:tr,_subjects:p,_proxyFormState:g,get _fields(){return s},get _formValues(){return n},get _state(){return l},set _state(i){l=i},get _defaultValues(){return o},get _names(){return c},set _names(i){c=i},get _formState(){return t},get _options(){return r},set _options(i){r={...r,...i}}},subscribe:er,trigger:ge,register:De,handleSubmit:at,watch:Jt,setValue:Z,getValues:tt,reset:lt,resetField:rr,clearErrors:Yt,unregister:Ae,setError:st,setFocus:sr,getFieldState:rt};return{...ut,formControl:ut}}function us(e={}){const r=_.useRef(void 0),t=_.useRef(void 0),[s,o]=_.useState({isDirty:!1,isValidating:!1,isLoading:Q(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,isReady:!1,defaultValues:Q(e.defaultValues)?void 0:e.defaultValues});if(!r.current)if(e.formControl)r.current={...e.formControl,formState:s},e.defaultValues&&!Q(e.defaultValues)&&e.formControl.reset(e.defaultValues,e.resetOptions);else{const{formControl:l,...c}=ls(e);r.current={...c,formState:s}}const n=r.current.control;return n._options=e,Ze(()=>{const l=n._subscribe({formState:n._proxyFormState,callback:()=>o({...n._formState}),reRenderRoot:!0});return o(c=>({...c,isReady:!0})),n._formState.isReady=!0,l},[n]),_.useEffect(()=>n._disableForm(e.disabled),[n,e.disabled]),_.useEffect(()=>{e.mode&&(n._options.mode=e.mode),e.reValidateMode&&(n._options.reValidateMode=e.reValidateMode)},[n,e.mode,e.reValidateMode]),_.useEffect(()=>{e.errors&&(n._setErrors(e.errors),n._focusError())},[n,e.errors]),_.useEffect(()=>{e.shouldUnregister&&n._subjects.state.next({values:n._getWatch()})},[n,e.shouldUnregister]),_.useEffect(()=>{if(n._proxyFormState.isDirty){const l=n._getDirty();l!==s.isDirty&&n._subjects.state.next({isDirty:l})}},[n,s.isDirty]),_.useEffect(()=>{var l;e.values&&!se(e.values,t.current)?(n._reset(e.values,{keepFieldsRef:!0,...n._options.resetOptions}),!((l=n._options.resetOptions)===null||l===void 0)&&l.keepIsValid||n._setValid(),t.current=e.values,o(c=>({...c}))):n._resetDefaultValues()},[n,e.values]),_.useEffect(()=>{n._state.mount||(n._setValid(),n._state.mount=!0),n._state.watch&&(n._state.watch=!1,n._subjects.state.next({...n._formState})),n._removeUnmounted()}),r.current.formState=_.useMemo(()=>Bt(s,n),[n,s]),r.current}const wt=(e,r,t)=>{if(e&&"reportValidity"in e){const s=y(t,r);e.setCustomValidity(s&&s.message||""),e.reportValidity()}},ze=(e,r)=>{for(const t in r.fields){const s=r.fields[t];s&&s.ref&&"reportValidity"in s.ref?wt(s.ref,t,e):s&&s.refs&&s.refs.forEach(o=>wt(o,t,e))}},jt=(e,r)=>{r.shouldUseNativeValidation&&ze(e,r);const t={};for(const s in e){const o=y(r.fields,s),n=Object.assign(e[s]||{},{ref:o&&o.ref});if(cs(r.names||Object.keys(e),s)){const l=Object.assign({},y(t,s));N(l,"root",n),N(t,s,l)}else N(t,s,n)}return t},cs=(e,r)=>{const t=At(r);return e.some(s=>At(s).match(`^${t}\\.\\d+`))};function At(e){return e.replace(/\]|\[/g,"")}function Dt(e,r){try{var t=e()}catch(s){return r(s)}return t&&t.then?t.then(void 0,r):t}function ds(e,r){for(var t={};e.length;){var s=e[0],o=s.code,n=s.message,l=s.path.join(".");if(!t[l])if("unionErrors"in s){var c=s.unionErrors[0].errors[0];t[l]={message:c.message,type:c.code}}else t[l]={message:n,type:o};if("unionErrors"in s&&s.unionErrors.forEach(function(A){return A.errors.forEach(function(g){return e.push(g)})}),r){var b=t[l].types,V=b&&b[s.code];t[l]=Ye(l,r,t,o,V?[].concat(V,s.message):s.message)}e.shift()}return t}function fs(e,r){for(var t={};e.length;){var s=e[0],o=s.code,n=s.message,l=s.path.join(".");if(!t[l])if(s.code==="invalid_union"&&s.errors.length>0){var c=s.errors[0][0];t[l]={message:c.message,type:c.code}}else t[l]={message:n,type:o};if(s.code==="invalid_union"&&s.errors.forEach(function(A){return A.forEach(function(g){return e.push(g)})}),r){var b=t[l].types,V=b&&b[s.code];t[l]=Ye(l,r,t,o,V?[].concat(V,s.message):s.message)}e.shift()}return t}function ms(e,r,t){if(t===void 0&&(t={}),(function(s){return"_def"in s&&typeof s._def=="object"&&"typeName"in s._def})(e))return function(s,o,n){try{return Promise.resolve(Dt(function(){return Promise.resolve(e[t.mode==="sync"?"parse":"parseAsync"](s,r)).then(function(l){return n.shouldUseNativeValidation&&ze({},n),{errors:{},values:t.raw?Object.assign({},s):l}})},function(l){if((function(c){return Array.isArray(c?.issues)})(l))return{values:{},errors:jt(ds(l.errors,!n.shouldUseNativeValidation&&n.criteriaMode==="all"),n)};throw l}))}catch(l){return Promise.reject(l)}};if((function(s){return"_zod"in s&&typeof s._zod=="object"})(e))return function(s,o,n){try{return Promise.resolve(Dt(function(){return Promise.resolve((t.mode==="sync"?cr:dr)(e,s,r)).then(function(l){return n.shouldUseNativeValidation&&ze({},n),{errors:{},values:t.raw?Object.assign({},s):l}})},function(l){if((function(c){return c instanceof fr})(l))return{values:{},errors:jt(fs(l.issues,!n.shouldUseNativeValidation&&n.criteriaMode==="all"),n)};throw l}))}catch(l){return Promise.reject(l)}};throw new Error("Invalid input: not a Zod schema")}const ys=Kr,Gt=G.createContext({}),St=({...e})=>d.jsx(Gt.Provider,{value:{name:e.name},children:d.jsx(Wr,{...e})}),Zt=()=>{const e=G.useContext(Gt),r=G.useContext(Xt),{getFieldState:t}=Qr(),s=qt({name:e.name}),o=t(e.name,s);if(!e)throw new Error("useFormField should be used within <FormField>");const{id:n}=r;return{id:n,name:e.name,formItemId:`${n}-form-item`,formDescriptionId:`${n}-form-item-description`,formMessageId:`${n}-form-item-message`,...o}},Xt=G.createContext({});function kt({className:e,...r}){const t=G.useId();return d.jsx(Xt.Provider,{value:{id:t},children:d.jsx("div",{className:$e("grid gap-2",e),"data-slot":"form-item",...r})})}function Et({...e}){const{error:r,formItemId:t,formDescriptionId:s,formMessageId:o}=Zt();return d.jsx(_r,{"aria-describedby":r?`${s} ${o}`:`${s}`,"aria-invalid":!!r,"data-slot":"form-control",id:t,...e})}function Nt({className:e,...r}){const{error:t,formMessageId:s}=Zt(),o=t?String(t?.message??""):r.children;return o?d.jsx("p",{className:$e("text-destructive text-sm",e),"data-slot":"form-message",id:s,...r,children:o}):null}function hs({className:e,...r}){return d.jsx(Te,{role:"status","aria-label":"Loading",className:$e("size-4 animate-spin",e),...r})}const gs=mr({name:Ve().min(1,{message:"Name is required"}).max(Pe,{message:`Name must be at most ${Pe} characters`}),url:Ve().min(1,{message:"URL is required"}).url({message:"Please enter a valid URL"}),type:yr(["http","sse"]),oauthClientId:Ve().optional(),oauthClientSecret:Ve().optional()});function vs({open:e,onClose:r}){const t=Mt(),s=le.list,{appName:o}=Le,[n,l]=G.useState(!1),c=us({resolver:ms(gs),defaultValues:{name:"",url:"",type:"http",oauthClientId:"",oauthClientSecret:""}});G.useEffect(()=>{e&&(c.reset({name:"",url:"",type:"http",oauthClientId:"",oauthClientSecret:""}),l(!1))},[e,c]);const{mutateAsync:b,isPending:V}=Re({mutationFn:hr,onError:g=>{me.error(g.message||"Failed to add connector")}}),A=async g=>{const C={...g,name:g.name.trim(),url:g.url.trim(),oauthClientId:g.oauthClientId?.trim()||void 0,oauthClientSecret:g.oauthClientSecret?.trim()||void 0};await b({name:C.name,url:C.url,type:C.type,oauthClientId:C.oauthClientId,oauthClientSecret:C.oauthClientSecret}),me.success("Connector added"),t.invalidateQueries({queryKey:s}),r()};return d.jsx(Vr,{onOpenChange:g=>!g&&r(),open:e,children:d.jsxs(Cr,{className:"sm:max-w-md",children:[d.jsxs(Fr,{children:[d.jsxs(wr,{className:"flex items-center gap-2",children:["Add custom connector",d.jsx(Rt,{className:"rounded-sm px-1 py-0 text-[10px] uppercase",variant:"secondary",children:"Beta"})]}),d.jsxs(jr,{children:["Connect ",o," to your data and tools. Learn more about connectors or get started with pre-built ones."]})]}),d.jsx(ys,{...c,children:d.jsxs("form",{className:"space-y-4",onSubmit:c.handleSubmit(A),children:[d.jsx(St,{control:c.control,name:"name",render:({field:g})=>d.jsxs(kt,{children:[d.jsx(Et,{children:d.jsx(ft,{...g,maxLength:Pe,placeholder:"Name"})}),d.jsx(Nt,{})]})}),d.jsx(St,{control:c.control,name:"url",render:({field:g})=>d.jsxs(kt,{children:[d.jsx(Et,{children:d.jsx(ft,{...g,placeholder:"Remote MCP server URL",type:"url"})}),d.jsx(Nt,{})]})}),!1,d.jsxs("p",{className:"text-muted-foreground text-xs leading-relaxed",children:["Only use connectors from developers you trust. ",o," does not control which tools developers make available and cannot verify that they will work as intended or that they won't change."]}),d.jsxs(Ar,{children:[d.jsx(ce,{disabled:V,onClick:r,type:"button",variant:"outline",children:"Cancel"}),d.jsxs(ce,{disabled:V,type:"submit",children:[V&&d.jsx(hs,{}),"Add"]})]})]})})]})})}const xs=["config","connect"];function bs(e){return e?xs.includes(e):!1}function ps(e){const r=e.get("dialog"),t=e.get("connectorId");return{dialog:bs(r)?r:null,connectorId:t||null}}function ii(){const e=Mt(),{data:r}=Or(),t=!!r?.user,s=Mr(),o=G.useMemo(()=>ps(s),[s]),{data:n,isLoading:l}=Oe({queryKey:le.list,queryFn:xr,enabled:Le.integrations.mcp&&t}),c=o.dialog==="config",b=o.dialog==="connect",V=G.useMemo(()=>b&&o.connectorId&&n?n.find(v=>v.id===o.connectorId)??null:null,[b,o.connectorId,n]),A=le.list,{mutate:g}=Re({mutationFn:vr,onMutate:async v=>{await e.cancelQueries({queryKey:A});const P=e.getQueryData(A);return e.setQueryData(A,R=>R&&R.filter(ee=>ee.id!==v.id)),{prev:P}},onError:(v,P,R)=>{e.setQueryData(A,R?.prev),me.error("Failed to uninstall connector")},onSuccess:()=>{me.success("Connector uninstalled")},onSettled:()=>{e.invalidateQueries({queryKey:A})}}),{mutate:C,isPending:p}=Re({mutationFn:gr,onSuccess:()=>{me.success("Disconnected")},onError:v=>{me.error(v.message||"Failed to disconnect")},onSettled:(v,P,R)=>{e.invalidateQueries({queryKey:A}),e.invalidateQueries({queryKey:le.checkAuth(R.id)}),e.invalidateQueries({queryKey:le.discover(R.id)})}}),S=G.useCallback(({dialog:v,connectorId:P})=>{const R=new URLSearchParams(s.toString());v?R.set("dialog",v):R.delete("dialog"),P?R.set("connectorId",P):R.delete("connectorId"),Ir(R,{history:"replace"})},[s]),M=G.useCallback(()=>{S({dialog:"config"})},[S]),O=()=>{S({dialog:null})},I=G.useCallback(v=>{S({dialog:"connect",connectorId:v})},[S]),F=G.useCallback(()=>{S({dialog:null})},[S]);if(!Le.integrations.mcp)return d.jsx(Ne,{className:"gap-4",children:d.jsx("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:d.jsx("p",{className:"font-medium text-sm",children:"MCP is not enabled"})})});if(l)return d.jsx(Ne,{className:"gap-4",children:d.jsx("div",{className:"animate-pulse space-y-3",children:[1,2,3].map(v=>d.jsx("div",{className:"h-20 rounded-lg bg-muted/50"},v))})});const q=(n??[]).filter(v=>v.userId!==null),w=(n??[]).filter(v=>v.userId===null);return d.jsxs(Ne,{className:"gap-6",children:[d.jsxs("div",{className:"flex items-center justify-between gap-3",children:[d.jsxs("div",{children:[d.jsx("p",{className:"font-medium text-sm",children:"Custom connectors"}),d.jsx("p",{className:"mt-0.5 text-muted-foreground text-xs",children:"Connect MCP servers you trust to extend your AI with tools."})]}),d.jsxs(ce,{onClick:M,size:"sm",children:[d.jsx(Rr,{className:"size-4"}),"Add custom connector"]})]}),d.jsx("div",{className:"flex flex-col",children:q.length>0?q.map((v,P)=>d.jsxs(G.Fragment,{children:[d.jsx(_s,{connector:v,isAuthenticated:t,isDisconnecting:p,onConnect:()=>I(v.id),onDisconnect:()=>C({id:v.id}),onUninstall:()=>g({id:v.id})}),P<q.length-1?d.jsx(Nr,{}):null]},v.id)):d.jsxs("div",{className:"flex flex-col items-center justify-center py-10 text-center",children:[d.jsx("div",{className:"mb-4 rounded-full bg-muted p-3",children:d.jsx(Br,{className:"size-6 text-muted-foreground"})}),d.jsx("p",{className:"font-medium text-sm",children:"No custom connectors"}),d.jsx("p",{className:"mt-1 max-w-sm text-muted-foreground text-xs",children:"Add a custom MCP connector to access tools from your services."})]})}),w.length>0?d.jsxs("div",{children:[d.jsx("p",{className:"font-medium text-sm",children:"Built-in connectors"}),d.jsx("div",{className:"divide-y",children:w.map(v=>d.jsx(Vs,{connector:v},v.id))})]}):null,d.jsx(vs,{onClose:O,open:c}),d.jsx(lr,{connector:V,onClose:F,open:b})]})}function _s({connector:e,onConnect:r,onUninstall:t,onDisconnect:s,isDisconnecting:o,isAuthenticated:n}){const{data:l}=Oe({queryKey:le.checkAuth(e.id),queryFn:()=>br({id:e.id}),staleTime:3e4,enabled:n}),{isLoading:c,data:b}=Oe({queryKey:le.testConnection(e.id),queryFn:()=>pr({id:e.id}),staleTime:3e4,retry:!1,enabled:n}),V=b?.needsAuth??!1,A=b?.status==="connected",g=b?.status==="incompatible",C=c?"Checking connectionâ€¦":g?"Incompatible server":V?"Authorization required":A?"Connected":b?.error??"Unable to reach server",p=c?"Loading":V?"Connect":"Configure",S=`/settings/connectors/${e.id}`,M=V&&!g,O=!(V||g);return d.jsxs("div",{className:"flex items-center gap-4 py-3",children:[d.jsx("div",{className:"flex min-w-0 flex-1 items-center gap-3 overflow-hidden text-left",children:d.jsx(Ot,{isCustom:!0,name:e.name,statusText:C,type:e.type,url:e.url})}),d.jsxs("div",{className:"flex shrink-0 items-center gap-2",children:[g?d.jsxs(Rt,{className:"gap-1",variant:"destructive",children:[d.jsx(ur,{className:"size-3"}),"Error"]}):null,M?d.jsx(ce,{disabled:c,onClick:r,size:"sm",children:c?d.jsxs("span",{className:"inline-flex items-center gap-2",children:[d.jsx(Te,{className:"size-4 animate-spin"}),"Loading"]}):d.jsxs("span",{className:"inline-flex items-center gap-2",children:["Connect",d.jsx(Tr,{className:"-mr-1 size-4"})]})}):null,O?d.jsx(ce,{asChild:!0,disabled:c,size:"sm",variant:"outline",children:d.jsx(It,{href:S,children:c?d.jsxs("span",{className:"inline-flex items-center gap-2",children:[d.jsx(Te,{className:"size-4 animate-spin"}),"Loading"]}):d.jsx("span",{className:"inline-flex items-center gap-2",children:p})})}):null,d.jsxs(Sr,{children:[d.jsx(kr,{asChild:!0,children:d.jsx(ce,{size:"icon",variant:"ghost",children:d.jsx(Lr,{className:"size-4"})})}),d.jsxs(Er,{align:"end",children:[l?.isAuthenticated?d.jsxs(d.Fragment,{children:[d.jsx(Me,{disabled:o,onClick:s,children:"Disconnect"}),d.jsx(mt,{})]}):null,V?d.jsxs(d.Fragment,{children:[d.jsx(Me,{onClick:I=>{I.preventDefault(),r()},children:"Connect"}),d.jsx(mt,{})]}):null,d.jsxs(Me,{className:"text-destructive focus:text-destructive",onClick:t,children:[d.jsx(Dr,{className:"size-4"}),"Uninstall"]})]})]})]})]})}function Vs({connector:e}){const r=`/settings/connectors/${e.id}`;return d.jsxs("div",{className:"flex w-full items-center gap-3 py-3 text-left",children:[d.jsx(Ot,{isCustom:!1,name:e.name,type:e.type,url:e.url}),d.jsx(ce,{asChild:!0,size:"sm",variant:"outline",children:d.jsx(It,{href:r,children:"View"})})]})}export{ii as ConnectorsSettings};
//# sourceMappingURL=connectors-settings-CPgiTVze.js.map
