{"version":3,"file":"shared-chat-page-B5a-xq2D.js","sources":["../../../hooks/use-mounted.ts","../../../components/with-skeleton.tsx","../../../app/(chat)/share/[id]/shared-chat-page.tsx"],"sourcesContent":["import { useEffect, useState } from \"react\";\n\nexport function useMounted() {\n  const [mounted, setMounted] = useState(false);\n\n  useEffect(() => {\n    setMounted(true);\n  }, []);\n\n  return mounted;\n}\n","\"use client\";\nimport { useMounted } from \"@/hooks/use-mounted\";\nimport { cn } from \"@/lib/utils\";\nimport { Skeleton } from \"./ui/skeleton\";\n\nexport function WithSkeleton({\n  children,\n  className,\n  isLoading,\n  ...props\n}: React.ComponentProps<\"div\"> & {\n  isLoading?: boolean;\n}) {\n  const mounted = useMounted();\n\n  return (\n    <div className={cn(\"relative w-fit\", className)} {...props}>\n      {children}\n\n      {(!mounted || isLoading) && (\n        <>\n          <div className={cn(\"absolute inset-0 bg-background\", className)} />\n\n          <Skeleton className={cn(\"absolute inset-0\", className)} />\n        </>\n      )}\n    </div>\n  );\n}\n","\"use client\";\nimport { useMemo } from \"react\";\nimport { ChatSystem } from \"@/components/chat-system\";\nimport { WithSkeleton } from \"@/components/with-skeleton\";\nimport { usePublicChat, usePublicChatMessages } from \"@/hooks/use-shared-chat\";\nimport { getDefaultThread } from \"@/lib/thread-utils\";\n\nexport function SharedChatPage({ id }: { id: string }) {\n  const {\n    data: chat,\n    isLoading: isChatLoading,\n    error: chatError,\n  } = usePublicChat(id);\n  const {\n    data: messages,\n    isLoading: isMessagesLoading,\n    error: messagesError,\n  } = usePublicChatMessages(id);\n\n  const initialThreadMessages = useMemo(() => {\n    if (!messages) {\n      return [];\n    }\n    return getDefaultThread(\n      messages.map((msg) => ({ ...msg, id: msg.id.toString() }))\n    );\n  }, [messages]);\n\n  if (!id) {\n    return (\n      <div className=\"flex h-dvh items-center justify-center\">\n        <div className=\"text-muted-foreground\">Chat not found.</div>\n      </div>\n    );\n  }\n\n  if (chatError || messagesError) {\n    // TODO: Replace for error page\n    return (\n      <div className=\"flex h-dvh items-center justify-center\">\n        <div className=\"text-muted-foreground\">\n          This chat is not available or has been set to private\n        </div>\n      </div>\n    );\n  }\n\n  if (!(isChatLoading || chat)) {\n    return (\n      <div className=\"flex h-dvh items-center justify-center\">\n        <div className=\"text-muted-foreground\">Chat not found.</div>\n      </div>\n    );\n  }\n\n  if (isMessagesLoading || isChatLoading) {\n    return (\n      <WithSkeleton\n        className=\"h-full w-full\"\n        isLoading={isChatLoading || isMessagesLoading}\n      >\n        <div className=\"flex h-dvh w-full\" />\n      </WithSkeleton>\n    );\n  }\n\n  if (!chat) {\n    return (\n      <div className=\"flex h-dvh items-center justify-center\">\n        <div className=\"text-muted-foreground\">Chat not found.</div>\n      </div>\n    );\n  }\n\n  return (\n    <WithSkeleton\n      className=\"w-full\"\n      isLoading={isChatLoading || isMessagesLoading}\n    >\n      <ChatSystem\n        id={chat.id}\n        initialMessages={initialThreadMessages}\n        isReadonly={true}\n      />\n    </WithSkeleton>\n  );\n}\n"],"names":["useMounted","mounted","setMounted","useState","useEffect","WithSkeleton","children","className","isLoading","props","jsxs","cn","Fragment","jsx","Skeleton","SharedChatPage","id","chat","isChatLoading","chatError","usePublicChat","messages","isMessagesLoading","messagesError","usePublicChatMessages","initialThreadMessages","useMemo","getDefaultThread","msg","ChatSystem"],"mappings":"quDAEO,SAASA,GAAa,CAC3B,KAAM,CAACC,EAASC,CAAU,EAAIC,EAAAA,SAAS,EAAK,EAE5CC,OAAAA,EAAAA,UAAU,IAAM,CACdF,EAAW,EAAI,CACjB,EAAG,CAAA,CAAE,EAEED,CACT,CCLO,SAASI,EAAa,CAC3B,SAAAC,EACA,UAAAC,EACA,UAAAC,EACA,GAAGC,CACL,EAEG,CACD,MAAMR,EAAUD,EAAA,EAEhB,OACEU,EAAAA,KAAC,OAAI,UAAWC,EAAG,iBAAkBJ,CAAS,EAAI,GAAGE,EAClD,SAAA,CAAAH,GAEC,CAACL,GAAWO,IACZE,EAAAA,KAAAE,EAAAA,SAAA,CACE,SAAA,CAAAC,EAAAA,IAAC,MAAA,CAAI,UAAWF,EAAG,iCAAkCJ,CAAS,EAAG,QAEhEO,EAAA,CAAS,UAAWH,EAAG,mBAAoBJ,CAAS,CAAA,CAAG,CAAA,CAAA,CAC1D,CAAA,EAEJ,CAEJ,CCrBO,SAASQ,GAAe,CAAE,GAAAC,GAAsB,CACrD,KAAM,CACJ,KAAMC,EACN,UAAWC,EACX,MAAOC,CAAA,EACLC,EAAcJ,CAAE,EACd,CACJ,KAAMK,EACN,UAAWC,EACX,MAAOC,CAAA,EACLC,EAAsBR,CAAE,EAEtBS,EAAwBC,EAAAA,QAAQ,IAC/BL,EAGEM,EACLN,EAAS,IAAKO,IAAS,CAAE,GAAGA,EAAK,GAAIA,EAAI,GAAG,SAAA,GAAa,CAAA,EAHlD,CAAA,EAKR,CAACP,CAAQ,CAAC,EAEb,OAAKL,EAQDG,GAAaI,EAGbV,EAAAA,IAAC,OAAI,UAAU,yCACb,eAAC,MAAA,CAAI,UAAU,wBAAwB,SAAA,uDAAA,CAEvC,CAAA,CACF,EAIEK,GAAiBD,EAQnBK,GAAqBJ,EAErBL,EAAAA,IAACR,EAAA,CACC,UAAU,gBACV,UAAWa,GAAiBI,EAE5B,SAAAT,EAAAA,IAAC,MAAA,CAAI,UAAU,mBAAA,CAAoB,CAAA,CAAA,EAKpCI,EASHJ,EAAAA,IAACR,EAAA,CACC,UAAU,SACV,UAAWa,GAAiBI,EAE5B,SAAAT,EAAAA,IAACgB,EAAA,CACC,GAAIZ,EAAK,GACT,gBAAiBQ,EACjB,WAAY,EAAA,CAAA,CACd,CAAA,EAfAZ,EAAAA,IAAC,OAAI,UAAU,yCACb,eAAC,MAAA,CAAI,UAAU,wBAAwB,SAAA,iBAAA,CAAe,CAAA,CACxD,EArBAA,EAAAA,IAAC,OAAI,UAAU,yCACb,eAAC,MAAA,CAAI,UAAU,wBAAwB,SAAA,iBAAA,CAAe,CAAA,CACxD,EArBAA,EAAAA,IAAC,OAAI,UAAU,yCACb,eAAC,MAAA,CAAI,UAAU,wBAAwB,SAAA,iBAAA,CAAe,CAAA,CACxD,CAsDN"}