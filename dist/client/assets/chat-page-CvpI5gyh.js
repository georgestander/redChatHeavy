import{r as a,j as s}from"./client-BXVv_YeC.js";import{u as m}from"./useSuspenseQuery-BcSmxX91.js";import{g as u,C as d}from"./chat-system-DDZKKNv-.js";import{f as c,h as f}from"./chat-sync-hooks-DcZBFnAH.js";import{a as l}from"./use-navigation-QuPGD7m8.js";import{u as h}from"./chat-id-provider-BiTIqLva.js";import{useSession as y}from"./session-provider-DBOweKPF.js";import"./useQuery-DtNLQT6k.js";import"./query-Cv3hDNY5.js";import"./QueryClientProvider-BboFp7b3.js";import"./utils-D-FPgC8r.js";import"./createLucideIcon-CqP9863P.js";import"./sidebar-C0WHgcyX.js";import"./button-BvmNNHkl.js";import"./index-B4KKYCLu.js";import"./input-CaNkDFJs.js";import"./index-C-kxXg33.js";import"./index-C_VP89m5.js";import"./index-CWLAyDMs.js";import"./index-B4ZZijhN.js";import"./index-ClCXh67x.js";import"./config-DrLGYCgI.js";import"./log-in-D92fC-_M.js";import"./index-BMGOATel.js";import"./project-details-dialog-CdFBmXpU.js";import"./dropdown-menu-DLPkoSE_.js";import"./index-DhI-dh9t.js";import"./trash-2-DP4m9RAL.js";import"./dialog-BVCtBu-i.js";import"./link-WNlkKt4p.js";import"./zap-Ctw7Kofj.js";import"./select-C-PLIKjq.js";import"./scroll-area-DLgGIp4C.js";import"./index-D3le2-Ql.js";import"./index-BbKsfTxS.js";import"./chat-models-provider-CB5B-j5r.js";import"./default-model-provider-CA0S3DY5.js";import"./plus-Dvf0tjwj.js";import"./useMutation-BU4p8oK4.js";import"./mutation-DaBpc3iQ.js";import"./label-1ycYdh1s.js";import"./card-BBGN6tFH.js";import"./get-google-favicon-url-Bedu1OEO.js";import"./search-CeF-vcTf.js";import"./switch-7fStXT0_.js";import"./model-selector-logo-CxG4duZO.js";import"./image-BO2RBlRM.js";import"./startOfDay-DFs_GiEJ.js";import"./credits-C6GN1dxI.js";import"./plug-DkltJc0a.js";import"./settings-CKiPG57k.js";import"./command-CP3kQh9u.js";import"./ellipsis-jqpQO7ZS.js";import"./auth-client-NCEzhzlD.js";function x(i){const o=a.useMemo(()=>i?u(i.map(t=>({...t,id:t.id.toString()}))):[],[i]),e=a.useMemo(()=>{const t=i?.findLast(r=>r.role==="assistant");if(!(t&&Array.isArray(t.parts)))return null;for(const r of t.parts)if(r?.type==="tool-deepResearch"&&r?.state==="output-available"&&r?.output?.format==="clarifying_questions")return"deepResearch";return null},[i]);return{initialMessages:o,initialTool:e}}function C({chatId:i}){const o=c(i),{data:e}=m(o),t=f(),{data:r}=m(t),{initialMessages:p,initialTool:n}=x(r);return e?s.jsx(d,{id:e.id,initialMessages:p,initialTool:n,isReadonly:!1}):s.jsx("div",{className:"flex h-dvh items-center justify-center",children:s.jsx("div",{className:"text-muted-foreground",children:"Chat not found."})})}function gt(){const{id:i,isPersisted:o}=h(),{data:e,isPending:t}=y(),r=l();return a.useEffect(()=>{o&&!t&&!e?.user&&r.replace("/")},[o,t,r,e?.user]),o?s.jsx(C,{chatId:i}):s.jsx("div",{className:"flex h-dvh items-center justify-center",children:s.jsx("div",{className:"text-muted-foreground",children:"Chat not found."})})}export{gt as ChatPage};
//# sourceMappingURL=chat-page-CvpI5gyh.js.map
