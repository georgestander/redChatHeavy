{"version":3,"file":"credits-DDlQ3Ab6-Cppr2SrQ.mjs","sources":["credits-DDlQ3Ab6.mjs"],"sourcesContent":["import{m as i,n as e,p as s,a as o,r as a,c as n}from\"./worker-entry-DwuZrGJP.mjs\";import\"/Users/georgestander/dev/tools/chatjs/node_modules/.pnpm/rwsdk@1.0.0-beta.53_@cloudflare+vite-plugin@1.23.0_bufferutil@4.1.0_vite@7.3.1_@types+node@22_zvk7ynha23nrady3r6nbat6zha/node_modules/rwsdk/dist/__intermediate_builds/ssr/ssr_bridge.js\";import\"node:events\";import\"cloudflare:workers\";import\"async_hooks\";import\"node:os\";import\"node:diagnostics_channel\";import\"fs\";import\"events\";import\"util\";import\"path\";import\"assert\";import\"node:stream\";import\"module\";import\"node:path\";import\"url\";import\"buffer\";import\"crypto\";import\"node:crypto\";async function c(r){await i.insert(e).values({userId:r}).onConflictDoNothing()}async function m(r){let t=await i.select({credits:e.credits}).from(e).where(s(e.userId,r)).limit(1);return t.length===0&&(await c(r),t=await i.select({credits:e.credits}).from(e).where(s(e.userId,r)).limit(1)),t[0]?.credits??0}async function p(){const t=(await o.api.getSession({headers:a.request.headers}))?.user?.id;if(!t)throw new Error(\"UNAUTHORIZED\");return t}async function d(){const r=await p();return{credits:await m(r)}}n(d,\"/src/server/actions/credits.ts\",\"getAvailableCredits\");export{d as getAvailableCredits};\n//# sourceMappingURL=credits-DDlQ3Ab6.mjs.map\n"],"names":["c","r","i","e","m","t","s","o","a","n"],"mappings":"sXAAunB,eAAeA,EAAEC,EAAE,CAAC,MAAMC,EAAE,OAAOC,CAAC,EAAE,OAAO,CAAC,OAAOF,CAAC,CAAC,EAAE,oBAAmB,CAAE,CAAC,eAAeG,EAAEH,EAAE,CAAC,IAAII,EAAE,MAAMH,EAAE,OAAO,CAAC,QAAQC,EAAE,OAAO,CAAC,EAAE,KAAKA,CAAC,EAAE,MAAMG,EAAEH,EAAE,OAAOF,CAAC,CAAC,EAAE,MAAM,CAAC,EAAE,OAAOI,EAAE,SAAS,IAAI,MAAML,EAAEC,CAAC,EAAEI,EAAE,MAAMH,EAAE,OAAO,CAAC,QAAQC,EAAE,OAAO,CAAC,EAAE,KAAKA,CAAC,EAAE,MAAMG,EAAEH,EAAE,OAAOF,CAAC,CAAC,EAAE,MAAM,CAAC,GAAGI,EAAE,CAAC,GAAG,SAAS,CAAC,CAAC,eAAe,GAAG,CAAC,MAAM,GAAG,MAAME,EAAE,IAAI,WAAW,CAAC,QAAQC,EAAE,QAAQ,OAAO,CAAC,IAAI,MAAM,GAAG,GAAG,CAAC,EAAE,MAAM,IAAI,MAAM,cAAc,EAAE,OAAO,CAAC,CAAC,eAAe,GAAG,CAAC,MAAMP,EAAE,MAAM,EAAC,EAAG,MAAM,CAAC,QAAQ,MAAMG,EAAEH,CAAC,CAAC,CAAC,CAACQ,EAAE,EAAE,iCAAiC,qBAAqB"}