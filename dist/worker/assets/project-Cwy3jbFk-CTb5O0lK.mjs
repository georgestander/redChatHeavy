import{e as l,X as w,t as u,f as v,r as h,g as d,c as n,E as c,W as a,R as g,n as j,m as i}from"./index-CPesPnUn.mjs";import"node:events";import"cloudflare:workers";import"async_hooks";import"node:os";import"node:diagnostics_channel";import"fs";import"events";import"util";import"path";import"assert";import"node:stream";import"module";import"node:path";import"url";import"buffer";import"crypto";import"node:crypto";const p=["folder","briefcase","book","code","dollar-sign","graduation-cap","heart","home","lightbulb","music","pencil","plane","shopping-cart","star","target","users","zap","coffee","camera","globe","flask","chart-bar","calendar","clipboard","rocket"],y=[{name:"gray",value:"#6b7280"},{name:"red",value:"#ef4444"},{name:"orange",value:"#f97316"},{name:"yellow",value:"#eab308"},{name:"green",value:"#22c55e"},{name:"cyan",value:"#06b6d4"},{name:"blue",value:"#3b82f6"},{name:"purple",value:"#a855f7"},{name:"pink",value:"#ec4899"}],m=y.map(t=>t.name),b=n({name:a().min(1),instructions:a().default(""),icon:c(p).optional(),iconColor:c(m).optional()}),E=n({id:a().uuid()}),I=n({id:a().uuid(),updates:n({name:a().min(1).optional(),instructions:a().optional(),icon:c(p).optional(),iconColor:c(m).optional()})}),A=n({id:a().uuid(),instructions:a()}),P=n({id:a().uuid()});function f(t){return{...t,createdAt:t.createdAt instanceof Date?t.createdAt.toISOString():t.createdAt,updatedAt:t.updatedAt instanceof Date?t.updatedAt.toISOString():t.updatedAt}}async function s(){const t=(await g.api.getSession({headers:j.request.headers}))?.user?.id;if(!t)throw new Error("UNAUTHORIZED");return t}async function S(){const t=await s();return(await v({userId:t})).map(r=>f(r))}async function C(t){const r=b.parse(t),o=await s(),e=l();return await w({id:e,userId:o,name:r.name,instructions:r.instructions,icon:r.icon,iconColor:r.iconColor}),{id:e}}async function k(t){const r=E.parse(t),o=await s(),e=await u({id:r.id});if(!e)throw new Error("Project not found");if(e.userId!==o)throw new Error("Project not found");return f(e)}async function O(t){const r=I.parse(t),o=await s(),e=await u({id:r.id});if(!e)throw new Error("Project not found");if(e.userId!==o)throw new Error("Project not found");return await d({id:r.id,updates:r.updates}),{success:!0}}async function R(t){const r=A.parse(t),o=await s(),e=await u({id:r.id});if(!e)throw new Error("Project not found");if(e.userId!==o)throw new Error("Project not found");return await d({id:r.id,updates:{instructions:r.instructions}}),{success:!0}}async function D(t){const r=P.parse(t),o=await s(),e=await u({id:r.id});if(!e)throw new Error("Project not found");if(e.userId!==o)throw new Error("Project not found");return await h({id:r.id}),{success:!0}}i(S,"/src/server/actions/project.ts","list");i(C,"/src/server/actions/project.ts","create");i(k,"/src/server/actions/project.ts","getById");i(O,"/src/server/actions/project.ts","update");i(R,"/src/server/actions/project.ts","setInstructions");i(D,"/src/server/actions/project.ts","remove");export{C as create,k as getById,S as list,D as remove,R as setInstructions,O as update};
//# sourceMappingURL=project-Cwy3jbFk-CTb5O0lK.mjs.map
