import{R as o,n as a,h as e,B as i,P as s,m as n}from"./index-CPesPnUn.mjs";import"node:events";import"cloudflare:workers";import"async_hooks";import"node:os";import"node:diagnostics_channel";import"fs";import"events";import"util";import"path";import"assert";import"node:stream";import"module";import"node:path";import"url";import"buffer";import"crypto";import"node:crypto";async function m(t){await e.insert(i).values({userId:t}).onConflictDoNothing()}async function c(t){let r=await e.select({credits:i.credits}).from(i).where(s(i.userId,t)).limit(1);return r.length===0&&(await m(t),r=await e.select({credits:i.credits}).from(i).where(s(i.userId,t)).limit(1)),r[0]?.credits??0}async function p(){const t=(await o.api.getSession({headers:a.request.headers}))?.user?.id;if(!t)throw new Error("UNAUTHORIZED");return t}async function d(){const t=await p();return{credits:await c(t)}}n(d,"/src/server/actions/credits.ts","getAvailableCredits");export{d as getAvailableCredits};
//# sourceMappingURL=credits-DDlQ3Ab6-Cppr2SrQ.mjs.map
