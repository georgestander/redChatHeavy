import{au as m,av as u,aw as d,ax as p,R as w,n as f,c as n,W as s,ay as l,m as i}from"./index-CPesPnUn.mjs";import"node:events";import"cloudflare:workers";import"async_hooks";import"node:os";import"node:diagnostics_channel";import"fs";import"events";import"util";import"path";import"assert";import"node:stream";import"module";import"node:path";import"url";import"buffer";import"crypto";import"node:crypto";const a=n({id:s()}),g=n({id:s(),content:s(),title:s(),kind:l()});async function c(){const o=await w.api.getSession({headers:f.request.headers});if(!o?.user)throw new Error("UNAUTHORIZED");const{id:e,...t}=o.user;if(!e)throw console.error("User ID missing in session callback"),new Error("UNAUTHORIZED");return{id:e,...t}}async function D(o){const e=await c(),t=a.parse(o),r=await m({id:t.id,userId:e.id});if(r.length===0)throw new Error("Document not found");return r}async function h(o){const e=a.parse(o),t=await u({id:e.id});if(t.length===0)throw new Error("Public document not found");return t}async function I(o){const e=await c(),t=g.parse(o),r=await d({id:t.id});if(!r)throw new Error("Document not found");return await p({id:t.id,content:t.content,title:t.title,kind:t.kind,userId:e.id,messageId:r.messageId}),{success:!0}}i(D,"/src/server/actions/document.ts","getDocuments");i(h,"/src/server/actions/document.ts","getPublicDocuments");i(I,"/src/server/actions/document.ts","saveDocument");export{D as getDocuments,h as getPublicDocuments,I as saveDocument};
//# sourceMappingURL=document-Caj9SmU3-D4kH4oKJ.mjs.map
