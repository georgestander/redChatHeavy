import{i as a,b as p,d as m,R as d,n as w,c as i,W as s,E as h,m as n}from"./index-CPesPnUn.mjs";import"node:events";import"cloudflare:workers";import"async_hooks";import"node:os";import"node:diagnostics_channel";import"fs";import"events";import"util";import"path";import"assert";import"node:stream";import"module";import"node:path";import"url";import"buffer";import"crypto";import"node:crypto";const u=i({chatId:s()}),I=i({chatId:s(),messageId:s(),type:h(["up","down"])});async function c(){const r=(await d.api.getSession({headers:w.request.headers}))?.user?.id;if(!r)throw new Error("UNAUTHORIZED");return r}async function f(r){const o=await c(),t=u.parse(r),e=await a({id:t.chatId});if(!e)throw new Error("Chat not found");if(e.userId!==o)throw new Error("UNAUTHORIZED");return await p({id:t.chatId})}async function E(r){const o=await c(),t=I.parse(r),e=await a({id:t.chatId});if(!e)throw new Error("Chat not found");if(e.userId!==o)throw new Error("UNAUTHORIZED");return await m({chatId:t.chatId,messageId:t.messageId,type:t.type}),{success:!0}}n(f,"/src/server/actions/vote.ts","getVotes");n(E,"/src/server/actions/vote.ts","voteMessage");export{f as getVotes,E as voteMessage};
//# sourceMappingURL=vote-sJwKlae4-DcLJBLCy.mjs.map
