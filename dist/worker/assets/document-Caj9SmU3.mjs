import{o as i,s as r,al as u,am as m,an as d,ao as p,ap as w,a as D,r as f,c as n}from"./worker-entry-DwuZrGJP.mjs";import"/Users/georgestander/dev/tools/chatjs/node_modules/.pnpm/rwsdk@1.0.0-beta.53_@cloudflare+vite-plugin@1.23.0_bufferutil@4.1.0_vite@7.3.1_@types+node@22_zvk7ynha23nrady3r6nbat6zha/node_modules/rwsdk/dist/__intermediate_builds/ssr/ssr_bridge.js";import"node:events";import"cloudflare:workers";import"async_hooks";import"node:os";import"node:diagnostics_channel";import"fs";import"events";import"util";import"path";import"assert";import"node:stream";import"module";import"node:path";import"url";import"buffer";import"crypto";import"node:crypto";const c=i({id:r()}),g=i({id:r(),content:r(),title:r(),kind:u()});async function a(){const e=await D.api.getSession({headers:f.request.headers});if(!e?.user)throw new Error("UNAUTHORIZED");const{id:s,...t}=e.user;if(!s)throw console.error("User ID missing in session callback"),new Error("UNAUTHORIZED");return{id:s,...t}}async function l(e){const s=await a(),t=c.parse(e),o=await m({id:t.id,userId:s.id});if(o.length===0)throw new Error("Document not found");return o}async function I(e){const s=c.parse(e),t=await d({id:s.id});if(t.length===0)throw new Error("Public document not found");return t}async function h(e){const s=await a(),t=g.parse(e),o=await p({id:t.id});if(!o)throw new Error("Document not found");return await w({id:t.id,content:t.content,title:t.title,kind:t.kind,userId:s.id,messageId:o.messageId}),{success:!0}}n(l,"/src/server/actions/document.ts","getDocuments");n(I,"/src/server/actions/document.ts","getPublicDocuments");n(h,"/src/server/actions/document.ts","saveDocument");export{l as getDocuments,I as getPublicDocuments,h as saveDocument};
//# sourceMappingURL=document-Caj9SmU3.mjs.map
