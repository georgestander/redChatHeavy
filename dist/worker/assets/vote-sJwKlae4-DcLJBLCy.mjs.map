{"version":3,"file":"vote-sJwKlae4-DcLJBLCy.mjs","sources":["vote-sJwKlae4.mjs"],"sourcesContent":["import{o as a,s as o,_ as p,d as i,e as d,v as m,a as u,r as I,c as n}from\"./worker-entry-DwuZrGJP.mjs\";import\"/Users/georgestander/dev/tools/chatjs/node_modules/.pnpm/rwsdk@1.0.0-beta.53_@cloudflare+vite-plugin@1.23.0_bufferutil@4.1.0_vite@7.3.1_@types+node@22_zvk7ynha23nrady3r6nbat6zha/node_modules/rwsdk/dist/__intermediate_builds/ssr/ssr_bridge.js\";import\"node:events\";import\"cloudflare:workers\";import\"async_hooks\";import\"node:os\";import\"node:diagnostics_channel\";import\"fs\";import\"events\";import\"util\";import\"path\";import\"assert\";import\"node:stream\";import\"module\";import\"node:path\";import\"url\";import\"buffer\";import\"crypto\";import\"node:crypto\";const h=a({chatId:o()}),w=a({chatId:o(),messageId:o(),type:p([\"up\",\"down\"])});async function c(){const e=(await u.api.getSession({headers:I.request.headers}))?.user?.id;if(!e)throw new Error(\"UNAUTHORIZED\");return e}async function g(s){const e=await c(),t=h.parse(s),r=await i({id:t.chatId});if(!r)throw new Error(\"Chat not found\");if(r.userId!==e)throw new Error(\"UNAUTHORIZED\");return await d({id:t.chatId})}async function f(s){const e=await c(),t=w.parse(s),r=await i({id:t.chatId});if(!r)throw new Error(\"Chat not found\");if(r.userId!==e)throw new Error(\"UNAUTHORIZED\");return await m({chatId:t.chatId,messageId:t.messageId,type:t.type}),{success:!0}}n(g,\"/src/server/actions/vote.ts\",\"getVotes\");n(f,\"/src/server/actions/vote.ts\",\"voteMessage\");export{g as getVotes,f as voteMessage};\n//# sourceMappingURL=vote-sJwKlae4.mjs.map\n"],"names":["h","a","o","w","p","e","u","I","g","s","r","i","d","f","m","n"],"mappings":"2YAA4oB,MAAMA,EAAEC,EAAE,CAAC,OAAOC,EAAC,CAAE,CAAC,EAAEC,EAAEF,EAAE,CAAC,OAAOC,EAAC,EAAG,UAAUA,EAAC,EAAG,KAAKE,EAAE,CAAC,KAAK,MAAM,CAAC,CAAC,CAAC,EAAE,eAAe,GAAG,CAAC,MAAMC,GAAG,MAAMC,EAAE,IAAI,WAAW,CAAC,QAAQC,EAAE,QAAQ,OAAO,CAAC,IAAI,MAAM,GAAG,GAAG,CAACF,EAAE,MAAM,IAAI,MAAM,cAAc,EAAE,OAAOA,CAAC,CAAC,eAAeG,EAAEC,EAAE,CAAC,MAAMJ,EAAE,MAAM,EAAC,EAAG,EAAEL,EAAE,MAAMS,CAAC,EAAEC,EAAE,MAAMC,EAAE,CAAC,GAAG,EAAE,MAAM,CAAC,EAAE,GAAG,CAACD,EAAE,MAAM,IAAI,MAAM,gBAAgB,EAAE,GAAGA,EAAE,SAASL,EAAE,MAAM,IAAI,MAAM,cAAc,EAAE,OAAO,MAAMO,EAAE,CAAC,GAAG,EAAE,MAAM,CAAC,CAAC,CAAC,eAAeC,EAAEJ,EAAE,CAAC,MAAMJ,EAAE,MAAM,EAAC,EAAG,EAAEF,EAAE,MAAMM,CAAC,EAAEC,EAAE,MAAMC,EAAE,CAAC,GAAG,EAAE,MAAM,CAAC,EAAE,GAAG,CAACD,EAAE,MAAM,IAAI,MAAM,gBAAgB,EAAE,GAAGA,EAAE,SAASL,EAAE,MAAM,IAAI,MAAM,cAAc,EAAE,OAAO,MAAMS,EAAE,CAAC,OAAO,EAAE,OAAO,UAAU,EAAE,UAAU,KAAK,EAAE,IAAI,CAAC,EAAE,CAAC,QAAQ,EAAE,CAAC,CAACC,EAAEP,EAAE,8BAA8B,UAAU,EAAEO,EAAEF,EAAE,8BAA8B,aAAa"}